"use strict";exports.id=536,exports.ids=[536],exports.modules={27598:e=>{let t="undefined"!=typeof Buffer,r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,a=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function o(e,o,s){null==s&&null!==o&&"object"==typeof o&&(s=o,o=void 0),t&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let i=JSON.parse(e,o);if(null===i||"object"!=typeof i)return i;let l=s&&s.protoAction||"error",u=s&&s.constructorAction||"error";if("ignore"===l&&"ignore"===u)return i;if("ignore"!==l&&"ignore"!==u){if(!1===r.test(e)&&!1===a.test(e))return i}else if("ignore"!==l&&"ignore"===u){if(!1===r.test(e))return i}else if(!1===a.test(e))return i;return n(i,{protoAction:l,constructorAction:u,safe:s&&s.safe})}function n(e,{protoAction:t="error",constructorAction:r="error",safe:a}={}){let o=[e];for(;o.length;){let e=o;for(let n of(o=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(n,"__proto__")){if(!0===a)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete n.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype")){if(!0===a)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete n.constructor}for(let e in n){let t=n[e];t&&"object"==typeof t&&o.push(t)}}}return e}function s(e,t,r){let a=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(e,t,r)}finally{Error.stackTraceLimit=a}}e.exports=s,e.exports.default=s,e.exports.parse=s,e.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},e.exports.scan=n},92031:(e,t,r)=>{r.d(t,{NF:()=>l,MS:()=>I,k0:()=>E,cP:()=>k,bF:()=>c,Sq:()=>x,tc:()=>T,Ox:()=>p,e$:()=>d,D_:()=>m,pd:()=>f,A8:()=>b,NX:()=>y,pW:()=>g,pY:()=>h,QT:()=>j});let a=(e,t=21)=>(r=t)=>{let a="",o=r;for(;o--;)a+=e[Math.random()*e.length|0];return a};var o=r(55203),n=r(27598);let s=[239,187,191];class i extends TransformStream{constructor(){let e;super({start(t){e=function(e){let t,r,a,o,n,i,l;return u(),{feed:function(u){var c;r=r?r+u:u,t&&(c=r,s.every((e,t)=>c.charCodeAt(t)===e))&&(r=r.slice(s.length)),t=!1;let p=r.length,d=0,m=!1;for(;d<p;){let t;m&&("\n"===r[d]&&++d,m=!1);let s=-1,u=o;for(let e=a;s<0&&e<p;++e)":"===(t=r[e])&&u<0?u=e-d:"\r"===t?(m=!0,s=e-d):"\n"===t&&(s=e-d);if(s<0){a=p-d,o=u;break}a=0,o=-1,function(t,r,a,o){if(0===o){l.length>0&&(e({type:"event",id:n,event:i||void 0,data:l.slice(0,-1)}),l="",n=void 0),i=void 0;return}let s=a<0,u=t.slice(r,r+(s?o:a)),c=0;c=s?o:" "===t[r+a+1]?a+2:a+1;let p=r+c,d=o-c,m=t.slice(p,p+d).toString();if("data"===u)l+=m?"".concat(m,"\n"):"\n";else if("event"===u)i=m;else if("id"!==u||m.includes("\0")){if("retry"===u){let t=parseInt(m,10);Number.isNaN(t)||e({type:"reconnect-interval",value:t})}}else n=m}(r,d,u,s),d+=s+1}d===p?r="":d>0&&(r=r.slice(d))},reset:u};function u(){t=!0,r="",a=0,o=-1,n=void 0,i=void 0,l=""}}(e=>{"event"===e.type&&t.enqueue(e)})},transform(t){e.feed(t)}})}}function l(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function u(e){let t={};return e.headers.forEach((e,r)=>{t[r]=e}),t}var c=({prefix:e="",size:t=7,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}={})=>{let o=a(r,t);return t=>`${e}${o(t)}`},p=c();function d(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}function m(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}function f({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:a}){if("string"==typeof e)return e;if(null!=e)throw new o.tZ({message:`${a} API key must be a string.`});if("undefined"==typeof process)throw new o.tZ({message:`${a} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(null==(e=process.env[t]))throw new o.tZ({message:`${a} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new o.tZ({message:`${a} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var h=Symbol.for("vercel.ai.validator");function g({value:e,schema:t}){let r="object"==typeof t&&null!==t&&h in t&&!0===t[h]&&"validate"in t?t:{[h]:!0,validate:e=>{let r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}};try{if(null==r.validate)return{success:!0,value:e};let t=r.validate(e);if(t.success)return t;return{success:!1,error:o.Gz.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:o.Gz.wrap({value:e,cause:t})}}}function y({text:e,schema:t}){try{let r=n.parse(e);if(null==t)return{success:!0,value:r};return g({value:r,schema:t})}catch(t){return{success:!1,error:o.xU.isJSONParseError(t)?t:new o.xU({text:e,cause:t})}}}var v=()=>globalThis.fetch,b=async({url:e,headers:t,body:r,failedResponseHandler:a,successfulResponseHandler:o,abortSignal:n,fetch:s})=>w({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:a,successfulResponseHandler:o,abortSignal:n,fetch:s}),w=async({url:e,headers:t={},body:r,successfulResponseHandler:a,failedResponseHandler:n,abortSignal:s,fetch:i=v()})=>{try{let l=await i(e,{method:"POST",headers:Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t)),body:r.content,signal:s}),c=u(l);if(!l.ok){let t;try{t=await n({response:l,url:e,requestBodyValues:r.values})}catch(t){if(m(t)||o.w.isAPICallError(t))throw t;throw new o.w({message:"Failed to process error response",cause:t,statusCode:l.status,url:e,responseHeaders:c,requestBodyValues:r.values})}throw t.value}try{return await a({response:l,url:e,requestBodyValues:r.values})}catch(t){if(t instanceof Error&&(m(t)||o.w.isAPICallError(t)))throw t;throw new o.w({message:"Failed to process successful response",cause:t,statusCode:l.status,url:e,responseHeaders:c,requestBodyValues:r.values})}}catch(t){if(m(t))throw t;if(t instanceof TypeError&&"fetch failed"===t.message){let a=t.cause;if(null!=a)throw new o.w({message:`Cannot connect to API: ${a.message}`,cause:a,url:e,requestBodyValues:r.values,isRetryable:!0})}throw t}},x=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:a,url:s,requestBodyValues:i})=>{let l=await a.text(),c=u(a);if(""===l.trim())return{responseHeaders:c,value:new o.w({message:a.statusText,url:s,requestBodyValues:i,statusCode:a.status,responseHeaders:c,responseBody:l,isRetryable:null==r?void 0:r(a)})};try{let u=function({text:e,schema:t}){try{let r=n.parse(e);if(null==t)return r;return function({value:e,schema:t}){let r=g({value:e,schema:t});if(!r.success)throw o.Gz.wrap({value:e,cause:r.error});return r.value}({value:r,schema:t})}catch(t){if(o.xU.isJSONParseError(t)||o.Gz.isTypeValidationError(t))throw t;throw new o.xU({text:e,cause:t})}}({text:l,schema:e});return{responseHeaders:c,value:new o.w({message:t(u),url:s,requestBodyValues:i,statusCode:a.status,responseHeaders:c,responseBody:l,data:u,isRetryable:null==r?void 0:r(a,u)})}}catch(e){return{responseHeaders:c,value:new o.w({message:a.statusText,url:s,requestBodyValues:i,statusCode:a.status,responseHeaders:c,responseBody:l,isRetryable:null==r?void 0:r(a)})}}},k=e=>async({response:t})=>{let r=u(t);if(null==t.body)throw new o.g8({});return{responseHeaders:r,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new i).pipeThrough(new TransformStream({transform({data:t},r){"[DONE]"!==t&&r.enqueue(y({text:t,schema:e}))}}))}},T=e=>async({response:t,url:r,requestBodyValues:a})=>{let n=await t.text(),s=y({text:n,schema:e}),i=u(t);if(!s.success)throw new o.w({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:n,url:r,requestBodyValues:a});return{responseHeaders:i,value:s.value}},{btoa:_,atob:S}=globalThis;function I(e){let t=S(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}function E(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return _(t)}function j(e){return null==e?void 0:e.replace(/\/$/,"")}},55203:(e,t,r)=>{r.d(t,{AX:()=>g,A_:()=>ee,Gz:()=>K,JJ:()=>D,Mt:()=>A,ON:()=>G,_d:()=>er,e$:()=>S,g8:()=>_,tZ:()=>q,w:()=>w,wA:()=>ea,xU:()=>R});var a,o,n,s,i,l,u,c,p,d,m="vercel.ai.error",f=Symbol.for(m),h=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[a]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,m)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}toJSON(){return{name:this.name,message:this.message}}};a=f;var g=h,y="AI_APICallError",v=`vercel.ai.error.${y}`,b=Symbol.for(v),w=class extends g{constructor({message:e,url:t,requestBodyValues:r,statusCode:a,responseHeaders:n,responseBody:s,cause:i,isRetryable:l=null!=a&&(408===a||409===a||429===a||a>=500),data:u}){super({name:y,message:e,cause:i}),this[o]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=n,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(e){return g.hasMarker(e,v)}static isAPICallError(e){return e instanceof Error&&e.name===y&&"string"==typeof e.url&&"object"==typeof e.requestBodyValues&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.responseHeaders||"object"==typeof e.responseHeaders)&&(null==e.responseBody||"string"==typeof e.responseBody)&&(null==e.cause||"object"==typeof e.cause)&&"boolean"==typeof e.isRetryable&&(null==e.data||"object"==typeof e.data)}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};o=b;var x="AI_EmptyResponseBodyError",k=`vercel.ai.error.${x}`,T=Symbol.for(k),_=class extends g{constructor({message:e="Empty response body"}={}){super({name:x,message:e}),this[n]=!0}static isInstance(e){return g.hasMarker(e,k)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===x}};function S(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}n=T;var I="AI_InvalidPromptError",E=`vercel.ai.error.${I}`,j=Symbol.for(E),A=class extends g{constructor({prompt:e,message:t,cause:r}){super({name:I,message:`Invalid prompt: ${t}`,cause:r}),this[s]=!0,this.prompt=e}static isInstance(e){return g.hasMarker(e,E)}static isInvalidPromptError(e){return e instanceof Error&&e.name===I&&null!=prompt}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}};s=j,Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var M="AI_JSONParseError",N=`vercel.ai.error.${M}`,P=Symbol.for(N),R=class extends g{constructor({text:e,cause:t}){super({name:M,message:`JSON parsing failed: Text: ${e}.
Error message: ${S(t)}`,cause:t}),this[i]=!0,this.text=e}static isInstance(e){return g.hasMarker(e,N)}static isJSONParseError(e){return e instanceof Error&&e.name===M&&"text"in e&&"string"==typeof e.text}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};i=P;var O="AI_LoadAPIKeyError",C=`vercel.ai.error.${O}`,$=Symbol.for(C),q=class extends g{constructor({message:e}){super({name:O,message:e}),this[l]=!0}static isInstance(e){return g.hasMarker(e,C)}static isLoadAPIKeyError(e){return e instanceof Error&&e.name===O}};l=$,Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError");var Z="AI_NoSuchModelError",z=`vercel.ai.error.${Z}`,U=Symbol.for(z),D=class extends g{constructor({errorName:e=Z,modelId:t,modelType:r,message:a=`No such ${r}: ${t}`}){super({name:e,message:a}),this[u]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return g.hasMarker(e,z)}static isNoSuchModelError(e){return e instanceof Error&&e.name===Z&&"string"==typeof e.modelId&&"string"==typeof e.modelType}toJSON(){return{name:this.name,message:this.message,stack:this.stack,modelId:this.modelId,modelType:this.modelType}}};u=U;var L="AI_TooManyEmbeddingValuesForCallError",J=`vercel.ai.error.${L}`,F=Symbol.for(J),G=class extends g{constructor(e){super({name:L,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[c]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return g.hasMarker(e,J)}static isTooManyEmbeddingValuesForCallError(e){return e instanceof Error&&e.name===L&&"provider"in e&&"string"==typeof e.provider&&"modelId"in e&&"string"==typeof e.modelId&&"maxEmbeddingsPerCall"in e&&"number"==typeof e.maxEmbeddingsPerCall&&"values"in e&&Array.isArray(e.values)}toJSON(){return{name:this.name,message:this.message,stack:this.stack,provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:this.values}}};c=F;var B="AI_TypeValidationError",V=`vercel.ai.error.${B}`,X=Symbol.for(V),W=class e extends g{constructor({value:e,cause:t}){super({name:B,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${S(t)}`,cause:t}),this[p]=!0,this.value=e}static isInstance(e){return g.hasMarker(e,V)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}static isTypeValidationError(e){return e instanceof Error&&e.name===B}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};p=X;var K=W,H="AI_UnsupportedFunctionalityError",Y=`vercel.ai.error.${H}`,Q=Symbol.for(Y),ee=class extends g{constructor({functionality:e}){super({name:H,message:`'${e}' functionality not supported.`}),this[d]=!0,this.functionality=e}static isInstance(e){return g.hasMarker(e,Y)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===H&&"string"==typeof e.functionality}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};function et(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(et):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&et(t)))}function er(e){return Array.isArray(e)&&e.every(et)}function ea(e){return null!=e&&"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&et(t))}d=Q},30006:(e,t,r)=>{let a;r.d(t,{BZ:()=>tG,bm:()=>tF,Ox:()=>t7,jA:()=>tw,kP:()=>tL}),r(27598);var o,n,s,i,l,u,c,p,d,m,f=r(92031);let h=Symbol("Let zodToJsonSchema decide on which parser to use"),g={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},y=e=>"string"==typeof e?{...g,name:e}:{...g,...e},v=e=>{let t=y(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};var b=r(37080);function w(e,t,r,a){a?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function x(e,t,r,a,o){e[t]=r,w(e,t,a,o)}let k=(e,t)=>q(e.innerType._def,t),T=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let a of e.checks)switch(a.kind){case"min":x(r,"minimum",a.value,a.message,t);break;case"max":x(r,"maximum",a.value,a.message,t)}return r},_=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,S={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===a&&(a=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),a),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function I(e,t){let r={type:"string"};function a(e){return"escape"===t.patternStrategy?E(e):e}if(e.checks)for(let o of e.checks)switch(o.kind){case"min":x(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,o.value):o.value,o.message,t);break;case"max":x(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,o.value):o.value,o.message,t);break;case"email":switch(t.emailStrategy){case"format:email":j(r,"email",o.message,t);break;case"format:idn-email":j(r,"idn-email",o.message,t);break;case"pattern:zod":A(r,S.email,o.message,t)}break;case"url":j(r,"uri",o.message,t);break;case"uuid":j(r,"uuid",o.message,t);break;case"regex":A(r,o.regex,o.message,t);break;case"cuid":A(r,S.cuid,o.message,t);break;case"cuid2":A(r,S.cuid2,o.message,t);break;case"startsWith":A(r,RegExp(`^${a(o.value)}`),o.message,t);break;case"endsWith":A(r,RegExp(`${a(o.value)}$`),o.message,t);break;case"datetime":j(r,"date-time",o.message,t);break;case"date":j(r,"date",o.message,t);break;case"time":j(r,"time",o.message,t);break;case"duration":j(r,"duration",o.message,t);break;case"length":x(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,o.value):o.value,o.message,t),x(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,o.value):o.value,o.message,t);break;case"includes":A(r,RegExp(a(o.value)),o.message,t);break;case"ip":"v6"!==o.version&&j(r,"ipv4",o.message,t),"v4"!==o.version&&j(r,"ipv6",o.message,t);break;case"emoji":A(r,S.emoji,o.message,t);break;case"ulid":A(r,S.ulid,o.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":j(r,"binary",o.message,t);break;case"contentEncoding:base64":x(r,"contentEncoding","base64",o.message,t);break;case"pattern:zod":A(r,S.base64,o.message,t)}break;case"nanoid":A(r,S.nanoid,o.message,t)}return r}let E=e=>Array.from(e).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),j=(e,t,r,a)=>{e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):x(e,"format",t,r,a)},A=(e,t,r,a)=>{e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:M(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):x(e,"pattern",M(t,a),r,a)},M=(e,t)=>{let r="function"==typeof e?e():e;if(!t.applyRegexFlags||!r.flags)return r.source;let a={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},o=a.i?r.source.toLowerCase():r.source,n="",s=!1,i=!1,l=!1;for(let e=0;e<o.length;e++){if(s){n+=o[e],s=!1;continue}if(a.i){if(i){if(o[e].match(/[a-z]/)){l?(n+=o[e]+`${o[e-2]}-${o[e]}`.toUpperCase(),l=!1):"-"===o[e+1]&&o[e+2]?.match(/[a-z]/)?(n+=o[e],l=!0):n+=`${o[e]}${o[e].toUpperCase()}`;continue}}else if(o[e].match(/[a-z]/)){n+=`[${o[e]}${o[e].toUpperCase()}]`;continue}}if(a.m){if("^"===o[e]){n+=`(^|(?<=[\r
]))`;continue}if("$"===o[e]){n+=`($|(?=[\r
]))`;continue}}if(a.s&&"."===o[e]){n+=i?`${o[e]}\r
`:`[${o[e]}\r
]`;continue}n+=o[e],"\\"===o[e]?s=!0:i&&"]"===o[e]?i=!1:i||"["!==o[e]||(i=!0)}try{new RegExp(n)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return n};function N(e,t){if("openApi3"===t.target&&e.keyType?._def.typeName===b.pA.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,a)=>({...r,[a]:q(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:q(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===b.pA.ZodString&&e.keyType._def.checks?.length){let a=Object.entries(I(e.keyType._def,t)).reduce((e,[t,r])=>"type"===t?e:{...e,[t]:r},{});return{...r,propertyNames:a}}return e.keyType?._def.typeName===b.pA.ZodEnum?{...r,propertyNames:{enum:e.keyType._def.values}}:r}let P={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},R=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>q(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0},O=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return q(e.innerType._def,t);let r=q(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},C=(e,t)=>{if("input"===t.pipeStrategy)return q(e.in._def,t);if("output"===t.pipeStrategy)return q(e.out._def,t);let r=q(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),a=q(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(e=>void 0!==e)}},$=(e,t)=>q(e.innerType._def,t);function q(e,t,r=!1){let a=t.seen.get(e);if(t.override){let o=t.override?.(e,t,a,r);if(o!==h)return o}if(a&&!r){let e=Z(a,t);if(void 0!==e)return e}let o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);let n=U(e,e.typeName,t);return n&&D(e,t,n),o.jsonSchema=n,n}let Z=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:z(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},z=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},U=(e,t,r)=>{switch(t){case b.pA.ZodString:return I(e,r);case b.pA.ZodNumber:return function(e,t){let r={type:"number"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"int":r.type="integer",w(r,"type",a.message,t);break;case"min":"jsonSchema7"===t.target?a.inclusive?x(r,"minimum",a.value,a.message,t):x(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),x(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?x(r,"maximum",a.value,a.message,t):x(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),x(r,"maximum",a.value,a.message,t));break;case"multipleOf":x(r,"multipleOf",a.value,a.message,t)}return r}(e,r);case b.pA.ZodObject:return function(e,t){let r={type:"object",...Object.entries(e.shape()).reduce((e,[r,a])=>{if(void 0===a||void 0===a._def)return e;let o=q(a._def,{...t,currentPath:[...t.currentPath,"properties",r],propertyPath:[...t.currentPath,"properties",r]});return void 0===o?e:{properties:{...e.properties,[r]:o},required:a.isOptional()?e.required:[...e.required,r]}},{properties:{},required:[]}),additionalProperties:"strict"===t.removeAdditionalStrategy?"ZodNever"===e.catchall._def.typeName?"strict"!==e.unknownKeys:q(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:q(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0};return r.required.length||delete r.required,r}(e,r);case b.pA.ZodBigInt:return function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"min":"jsonSchema7"===t.target?a.inclusive?x(r,"minimum",a.value,a.message,t):x(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),x(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?x(r,"maximum",a.value,a.message,t):x(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),x(r,"maximum",a.value,a.message,t));break;case"multipleOf":x(r,"multipleOf",a.value,a.message,t)}return r}(e,r);case b.pA.ZodBoolean:return{type:"boolean"};case b.pA.ZodDate:return function e(t,r,a){let o=a??r.dateStrategy;if(Array.isArray(o))return{anyOf:o.map((a,o)=>e(t,r,a))};switch(o){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return T(t,r)}}(e,r);case b.pA.ZodUndefined:return{not:{}};case b.pA.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case b.pA.ZodArray:return function(e,t){let r={type:"array"};return e.type?._def?.typeName!==b.pA.ZodAny&&(r.items=q(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&x(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&x(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(x(r,"minItems",e.exactLength.value,e.exactLength.message,t),x(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case b.pA.ZodUnion:case b.pA.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return R(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in P&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=P[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return R(e,t)}(e,r);case b.pA.ZodIntersection:return function(e,t){let r=[q(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),q(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),a="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,o=[];return r.forEach(e=>{if(_(e))o.push(...e.allOf),void 0===e.unevaluatedProperties&&(a=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...a}=e;t=a}else a=void 0;o.push(t)}}),o.length?{allOf:o,...a}:void 0}(e,r);case b.pA.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>q(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:q(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>q(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,r);case b.pA.ZodRecord:return N(e,r);case b.pA.ZodLiteral:return function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case b.pA.ZodEnum:return{type:"string",enum:e.values};case b.pA.ZodNativeEnum:return function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),a=Array.from(new Set(r.map(e=>typeof e)));return{type:1===a.length?"string"===a[0]?"string":"number":["string","number"],enum:r}}(e);case b.pA.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:P[e.innerType._def.typeName],nullable:!0}:{type:[P[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=q(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=q(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case b.pA.ZodOptional:return O(e,r);case b.pA.ZodMap:return function(e,t){return"record"===t.mapStrategy?N(e,t):{type:"array",maxItems:125,items:{type:"array",items:[q(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},q(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,r);case b.pA.ZodSet:return function(e,t){let r={type:"array",uniqueItems:!0,items:q(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&x(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&x(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case b.pA.ZodLazy:return q(e.getter()._def,r);case b.pA.ZodPromise:return q(e.type._def,r);case b.pA.ZodNaN:case b.pA.ZodNever:return{not:{}};case b.pA.ZodEffects:return function(e,t){return"input"===t.effectStrategy?q(e.schema._def,t):{}}(e,r);case b.pA.ZodAny:case b.pA.ZodUnknown:return{};case b.pA.ZodDefault:return function(e,t){return{...q(e.innerType._def,t),default:e.defaultValue()}}(e,r);case b.pA.ZodBranded:return q(e.type._def,r);case b.pA.ZodReadonly:return $(e,r);case b.pA.ZodCatch:return k(e,r);case b.pA.ZodPipeline:return C(e,r);case b.pA.ZodFunction:case b.pA.ZodVoid:case b.pA.ZodSymbol:default:return}},D=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),L=(e,t)=>{let r=v(t),a="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,a])=>({...e,[t]:q(a._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??{}}),{}):void 0,o="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,n=q(e._def,void 0===o?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??{},s="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==s&&(n.title=s);let i=void 0===o?a?{...n,[r.definitionPath]:a}:n:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...a,[o]:n}};return"jsonSchema7"===r.target?i.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"===r.target&&(i.$schema="https://json-schema.org/draft/2019-09/schema#"),i};var J={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},F={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},G={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},B={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},V={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},X={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},W={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},K={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>null==e||"object"!=typeof e||!("id"in e)||"string"!=typeof e.id||!("type"in e)||"string"!=typeof e.type||!("function"in e)||null==e.function||"object"!=typeof e.function||!("arguments"in e.function)||"string"!=typeof e.function.name||"string"!=typeof e.function.arguments))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},H={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Y={code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Q={code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},ee={code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},et={code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},er={code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},ea={code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},eo=[J,F,G,B,V,X,W,K,H,Y,Q,ee,et,er,ea],en={[J.code]:J,[F.code]:F,[G.code]:G,[B.code]:B,[V.code]:V,[X.code]:X,[W.code]:W,[K.code]:K,[H.code]:H,[Y.code]:Y,[Q.code]:Q,[ee.code]:ee,[et.code]:et,[er.code]:er,[ea.code]:ea};J.name,J.code,F.name,F.code,G.name,G.code,B.name,B.code,V.name,V.code,X.name,X.code,W.name,W.code,K.name,K.code,H.name,H.code,Y.name,Y.code,Q.name,Q.code,ee.name,ee.code,et.name,et.code,er.name,er.code,ea.name,ea.code;var es=eo.map(e=>e.code),ei=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!es.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let a=JSON.parse(e.slice(t+1));return en[r].parse(a)};function el(e,t){let r=eo.find(t=>t.name===e);if(!r)throw Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}var eu=Symbol.for("vercel.ai.schema");function ec(e){return"object"==typeof e&&null!==e&&eu in e&&!0===e[eu]&&"jsonSchema"in e&&"validate"in e?e:function(e,{validate:t}={}){return{[eu]:!0,_type:void 0,[f.pY]:!0,jsonSchema:e,validate:t}}(L(e),{validate:t=>{let r=e.safeParse(t);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}var ep=r(55203),ed=r(38690),em=r(57368),ef=Object.defineProperty,eh=(e,t)=>{for(var r in t)ef(e,r,{get:t[r],enumerable:!0})};async function eg(e){return void 0===e?Promise.resolve():new Promise(t=>setTimeout(t,e))}var ey="AI_RetryError",ev=`vercel.ai.error.${ey}`,eb=Symbol.for(ev),ew=class extends ep.AX{constructor({message:e,reason:t,errors:r}){super({name:ey,message:e}),this[o]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return ep.AX.hasMarker(e,ev)}static isRetryError(e){return e instanceof Error&&e.name===ey&&"string"==typeof e.reason&&Array.isArray(e.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};o=eb;var ex=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2}={})=>async a=>ek(a,{maxRetries:e,delayInMs:t,backoffFactor:r});async function ek(e,{maxRetries:t,delayInMs:r,backoffFactor:a},o=[]){try{return await e()}catch(l){if((0,f.D_)(l)||0===t)throw l;let n=(0,f.e$)(l),s=[...o,l],i=s.length;if(i>t)throw new ew({message:`Failed after ${i} attempts. Last error: ${n}`,reason:"maxRetriesExceeded",errors:s});if(l instanceof Error&&ep.w.isAPICallError(l)&&!0===l.isRetryable&&i<=t)return await eg(r),ek(e,{maxRetries:t,delayInMs:a*r,backoffFactor:a},s);if(1===i)throw l;throw new ew({message:`Failed after ${i} attempts with non-retryable error: '${n}'`,reason:"errorNotRetryable",errors:s})}}function eT({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}function e_({model:e,settings:t,telemetry:r,headers:a}){var o;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,r])=>(e[`ai.settings.${t}`]=r,e),{}),...Object.entries(null!=(o=null==r?void 0:r.metadata)?o:{}).reduce((e,[t,r])=>(e[`ai.telemetry.metadata.${t}`]=r,e),{}),...Object.entries(null!=a?a:{}).reduce((e,[t,r])=>(void 0!==r&&(e[`ai.request.headers.${t}`]=r),e),{})}}var eS={startSpan:()=>eI,startActiveSpan:(e,t,r,a)=>"function"==typeof t?t(eI):"function"==typeof r?r(eI):"function"==typeof a?a(eI):void 0},eI={spanContext:()=>eE,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},eE={traceId:"",spanId:"",traceFlags:0},ej=void 0;function eA({isEnabled:e}){return e?ej||ed.g.getTracer("ai"):eS}function eM({name:e,tracer:t,attributes:r,fn:a,endWhenDone:o=!0}){return t.startActiveSpan(e,{attributes:r},async e=>{try{let t=await a(e);return o&&e.end(),t}catch(t){try{t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:em.Q.ERROR,message:t.message})):e.setStatus({code:em.Q.ERROR})}finally{e.end()}throw t}})}function eN({telemetry:e,attributes:t}){return Object.entries(t).reduce((t,[r,a])=>{if(void 0===a)return t;if("object"==typeof a&&"input"in a&&"function"==typeof a.input){if((null==e?void 0:e.recordInputs)===!1)return t;let o=a.input();return void 0===o?t:{...t,[r]:o}}if("object"==typeof a&&"output"in a&&"function"==typeof a.output){if((null==e?void 0:e.recordOutputs)===!1)return t;let o=a.output();return void 0===o?t:{...t,[r]:o}}return{...t,[r]:a}},{})}var eP="AI_DownloadError",eR=`vercel.ai.error.${eP}`,eO=Symbol.for(eR),eC=class extends ep.AX{constructor({url:e,statusCode:t,statusText:r,cause:a,message:o=null==a?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${a}`}){super({name:eP,message:o,cause:a}),this[n]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return ep.AX.hasMarker(e,eR)}static isDownloadError(e){return e instanceof Error&&e.name===eP&&"string"==typeof e.url&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.statusText||"string"==typeof e.statusText)}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};async function e$({url:e,fetchImplementation:t=fetch}){var r;let a=e.toString();try{let e=await t(a);if(!e.ok)throw new eC({url:a,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mimeType:null!=(r=e.headers.get("content-type"))?r:void 0}}catch(e){if(eC.isInstance(e))throw e;throw new eC({url:a,cause:e})}}n=eO;var eq=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}],eZ="AI_InvalidDataContentError",ez=`vercel.ai.error.${eZ}`,eU=Symbol.for(ez),eD=class extends ep.AX{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:eZ,message:r,cause:t}),this[s]=!0,this.content=e}static isInstance(e){return ep.AX.hasMarker(e,ez)}static isInvalidDataContentError(e){return e instanceof Error&&e.name===eZ&&null!=e.content}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};s=eU;var eL=b.G0([b.Z_(),b.Pp(Uint8Array),b.Pp(ArrayBuffer),b.PG(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function eJ(e){return"string"==typeof e?e:e instanceof ArrayBuffer?(0,f.k0)(new Uint8Array(e)):(0,f.k0)(e)}function eF(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return(0,f.MS)(e)}catch(t){throw new eD({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new eD({content:e})}var eG="AI_InvalidMessageRoleError",eB=`vercel.ai.error.${eG}`,eV=Symbol.for(eB),eX=class extends ep.AX{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:eG,message:t}),this[i]=!0,this.role=e}static isInstance(e){return ep.AX.hasMarker(e,eB)}static isInvalidMessageRoleError(e){return e instanceof Error&&e.name===eG&&"string"==typeof e.role}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};function eW(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}async function eK({prompt:e,modelSupportsImageUrls:t=!0,downloadImplementation:r=e$}){let a=[];null!=e.system&&a.push({role:"system",content:e.system});let o=t||null==e.messages?null:await eY(e.messages,r),n=e.type;switch(n){case"prompt":a.push({role:"user",content:[{type:"text",text:e.prompt}]});break;case"messages":a.push(...e.messages.map(e=>eH(e,o)));break;default:throw Error(`Unsupported prompt type: ${n}`)}return a}function eH(e,t){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerMetadata:e.experimental_providerMetadata};case"user":if("string"==typeof e.content)return{role:"user",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"user",content:e.content.map(r=>{var a,o,n,s,i;switch(r.type){case"text":return{type:"text",text:r.text,providerMetadata:r.experimental_providerMetadata};case"image":{if(r.image instanceof URL){if(null==t)return{type:"image",image:r.image,mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata};{let e=t[r.image.toString()];return{type:"image",image:e.data,mimeType:null!=(a=r.mimeType)?a:e.mimeType,providerMetadata:r.experimental_providerMetadata}}}if("string"==typeof r.image)try{let a=new URL(r.image);switch(a.protocol){case"http:":case"https:":if(null==t)return{type:"image",image:a,mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata};{let e=t[a.toString()];return{type:"image",image:e.data,mimeType:null!=(o=r.mimeType)?o:e.mimeType,providerMetadata:r.experimental_providerMetadata}}case"data:":try{let{mimeType:e,base64Content:t}=eW(r.image);if(null==e||null==t)throw Error("Invalid data URL format");return{type:"image",image:eF(t),mimeType:e,providerMetadata:r.experimental_providerMetadata}}catch(t){throw Error(`Error processing data URL: ${(0,f.e$)(e)}`)}}}catch(e){}let s=eF(r.image);return{type:"image",image:s,mimeType:null!=(n=r.mimeType)?n:function(e){for(let{bytes:t,mimeType:r}of eq)if(e.length>=t.length&&t.every((t,r)=>e[r]===t))return r}(s),providerMetadata:r.experimental_providerMetadata}}case"file":if(r.data instanceof URL){if(null==t)return{type:"file",data:r.data,mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata};{let e=t[r.data.toString()];return{type:"file",data:(0,f.k0)(e.data),mimeType:null!=(s=r.mimeType)?s:e.mimeType,providerMetadata:r.experimental_providerMetadata}}}if("string"==typeof r.data)try{let a=new URL(r.data);switch(a.protocol){case"http:":case"https:":if(null==t)return{type:"file",data:a,mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata};{let e=t[a.toString()];return{type:"file",data:(0,f.k0)(e.data),mimeType:null!=(i=r.mimeType)?i:e.mimeType,providerMetadata:r.experimental_providerMetadata}}case"data:":try{let{mimeType:e,base64Content:t}=eW(r.data);if(null==e||null==t)throw Error("Invalid data URL format");return{type:"file",data:eJ(t),mimeType:e,providerMetadata:r.experimental_providerMetadata}}catch(t){throw Error(`Error processing data URL: ${(0,f.e$)(e)}`)}}}catch(e){}return{type:"file",data:eJ(r.data),mimeType:r.mimeType,providerMetadata:r.experimental_providerMetadata}}}).filter(e=>"text"!==e.type||""!==e.text),providerMetadata:e.experimental_providerMetadata};case"assistant":if("string"==typeof e.content)return{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:e.experimental_providerMetadata};return{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text).map(e=>{let{experimental_providerMetadata:t,...r}=e;return{...r,providerMetadata:t}}),providerMetadata:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result,providerMetadata:e.experimental_providerMetadata})),providerMetadata:e.experimental_providerMetadata};default:throw new eX({role:r})}}async function eY(e,t){let r=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).map(e=>"image"===e.type?e.image:e.data).map(e=>"string"==typeof e&&(e.startsWith("http:")||e.startsWith("https:"))?new URL(e):e).filter(e=>e instanceof URL);return Object.fromEntries((await Promise.all(r.map(async e=>({url:e,data:await t({url:e})})))).map(({url:e,data:t})=>[e.toString(),t]))}i=eV;var eQ="AI_InvalidArgumentError",e0=`vercel.ai.error.${eQ}`,e1=Symbol.for(e0),e2=class extends ep.AX{constructor({parameter:e,value:t,message:r}){super({name:eQ,message:`Invalid argument for parameter ${e}: ${r}`}),this[l]=!0,this.parameter=e,this.value=t}static isInstance(e){return ep.AX.hasMarker(e,e0)}static isInvalidArgumentError(e){return e instanceof Error&&e.name===eQ&&"string"==typeof e.parameter&&"string"==typeof e.value}toJSON(){return{name:this.name,message:this.message,stack:this.stack,parameter:this.parameter,value:this.value}}};function e7({maxTokens:e,temperature:t,topP:r,topK:a,presencePenalty:o,frequencyPenalty:n,stopSequences:s,seed:i,maxRetries:l}){if(null!=e){if(!Number.isInteger(e))throw new e2({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new e2({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new e2({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=r&&"number"!=typeof r)throw new e2({parameter:"topP",value:r,message:"topP must be a number"});if(null!=a&&"number"!=typeof a)throw new e2({parameter:"topK",value:a,message:"topK must be a number"});if(null!=o&&"number"!=typeof o)throw new e2({parameter:"presencePenalty",value:o,message:"presencePenalty must be a number"});if(null!=n&&"number"!=typeof n)throw new e2({parameter:"frequencyPenalty",value:n,message:"frequencyPenalty must be a number"});if(null!=i&&!Number.isInteger(i))throw new e2({parameter:"seed",value:i,message:"seed must be an integer"});if(null!=l){if(!Number.isInteger(l))throw new e2({parameter:"maxRetries",value:l,message:"maxRetries must be an integer"});if(l<0)throw new e2({parameter:"maxRetries",value:l,message:"maxRetries must be >= 0"})}return{maxTokens:e,temperature:null!=t?t:0,topP:r,topK:a,presencePenalty:o,frequencyPenalty:n,stopSequences:null!=s&&s.length>0?s:void 0,seed:i,maxRetries:null!=l?l:2}}l=e1;var e8=b.Vo(()=>b.G0([b.lB(),b.Z_(),b.Rx(),b.O7(),b.IM(b.Z_(),e8),b.IX(e8)])),e6=b.IM(b.Z_(),b.IM(b.Z_(),e8)),e3=b.Ry({type:b.i0("text"),text:b.Z_(),experimental_providerMetadata:e6.optional()}),e9=b.Ry({type:b.i0("image"),image:b.G0([eL,b.Pp(URL)]),mimeType:b.Z_().optional(),experimental_providerMetadata:e6.optional()}),e4=b.Ry({type:b.i0("file"),data:b.G0([eL,b.Pp(URL)]),mimeType:b.Z_(),experimental_providerMetadata:e6.optional()}),e5=b.Ry({type:b.i0("tool-call"),toolCallId:b.Z_(),toolName:b.Z_(),args:b._4()}),te=b.Ry({type:b.i0("tool-result"),toolCallId:b.Z_(),toolName:b.Z_(),result:b._4(),isError:b.O7().optional(),experimental_providerMetadata:e6.optional()}),tt=b.Ry({role:b.i0("system"),content:b.Z_(),experimental_providerMetadata:e6.optional()}),tr=b.Ry({role:b.i0("user"),content:b.G0([b.Z_(),b.IX(b.G0([e3,e9,e4]))]),experimental_providerMetadata:e6.optional()}),ta=b.Ry({role:b.i0("assistant"),content:b.G0([b.Z_(),b.IX(b.G0([e3,e5]))]),experimental_providerMetadata:e6.optional()}),to=b.Ry({role:b.i0("tool"),content:b.IX(te),experimental_providerMetadata:e6.optional()}),tn=b.G0([tt,tr,ta,to]);function ts(e){if(null==e.prompt&&null==e.messages)throw new ep.Mt({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new ep.Mt({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new ep.Mt({prompt:e,message:"system must be a string"});if(null!=e.prompt){if("string"!=typeof e.prompt)throw new ep.Mt({prompt:e,message:"prompt must be a string"});return{type:"prompt",prompt:e.prompt,messages:void 0,system:e.system}}if(null!=e.messages){let t=(0,f.pW)({value:e.messages,schema:b.IX(tn)});if(!t.success)throw new ep.Mt({prompt:e,message:"messages must be an array of CoreMessage",cause:t.error});return{type:"messages",prompt:void 0,messages:e.messages,system:e.system}}throw Error("unreachable")}function ti(e){return{promptTokens:e.promptTokens,completionTokens:e.completionTokens,totalTokens:e.promptTokens+e.completionTokens}}function tl(e,{contentType:t,dataStreamVersion:r}){var a;let o=new Headers(null!=(a=null==e?void 0:e.headers)?a:{});return o.has("Content-Type")||o.set("Content-Type",t),void 0!==r&&o.set("X-Vercel-AI-Data-Stream",r),o}function tu({prompt:e,schema:t,schemaPrefix:r=null!=t?"JSON schema:":void 0,schemaSuffix:a=null!=t?"You MUST answer with a JSON object that matches the JSON schema above.":"You MUST answer with JSON."}){return[null!=e&&e.length>0?e:void 0,null!=e&&e.length>0?"":void 0,r,null!=t?JSON.stringify(t):void 0,a].filter(e=>null!=e).join("\n")}var tc="AI_NoObjectGeneratedError",tp=`vercel.ai.error.${tc}`,td=Symbol.for(tp),tm=class extends ep.AX{constructor({message:e="No object generated."}={}){super({name:tc,message:e}),this[u]=!0}static isInstance(e){return ep.AX.hasMarker(e,tp)}static isNoObjectGeneratedError(e){return e instanceof Error&&e.name===tc}toJSON(){return{name:this.name,cause:this.cause,message:this.message,stack:this.stack}}};function tf(e,t){let r=e.pipeThrough(new TransformStream(t));return r[Symbol.asyncIterator]=()=>{let e=r.getReader();return{async next(){let{done:t,value:r}=await e.read();return t?{done:!0,value:void 0}:{done:!1,value:r}}}},r}u=td;var th={type:"no-schema",jsonSchema:void 0,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:e=>void 0===e?{success:!1,error:new tm}:{success:!0,value:e},createElementStream(){throw new ep.A_({functionality:"element streams in no-schema mode"})}},tg=e=>({type:"object",jsonSchema:e.jsonSchema,validatePartialResult:({value:e,textDelta:t})=>({success:!0,value:{partial:e,textDelta:t}}),validateFinalResult:t=>(0,f.pW)({value:t,schema:e}),createElementStream(){throw new ep.A_({functionality:"element streams in object mode"})}}),ty=e=>{let{$schema:t,...r}=e.jsonSchema;return{type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:r}},required:["elements"],additionalProperties:!1},validatePartialResult({value:t,latestObject:r,isFirstDelta:a,isFinalDelta:o}){var n;if(!(0,ep.wA)(t)||!(0,ep._d)(t.elements))return{success:!1,error:new ep.Gz({value:t,cause:"value must be an object that contains an array of elements"})};let s=t.elements,i=[];for(let t=0;t<s.length;t++){let r=s[t],a=(0,f.pW)({value:r,schema:e});if(t!==s.length-1||o){if(!a.success)return a;i.push(a.value)}}let l=null!=(n=null==r?void 0:r.length)?n:0,u="";return a&&(u+="["),l>0&&(u+=","),u+=i.slice(l).map(e=>JSON.stringify(e)).join(","),o&&(u+="]"),{success:!0,value:{partial:i,textDelta:u}}},validateFinalResult(t){if(!(0,ep.wA)(t)||!(0,ep._d)(t.elements))return{success:!1,error:new ep.Gz({value:t,cause:"value must be an object that contains an array of elements"})};let r=t.elements;for(let t of r){let r=(0,f.pW)({value:t,schema:e});if(!r.success)return r}return{success:!0,value:r}},createElementStream(e){let t=0;return tf(e,{transform(e,r){switch(e.type){case"object":{let a=e.object;for(;t<a.length;t++)r.enqueue(a[t]);break}case"text-delta":case"finish":break;case"error":r.error(e.error);break;default:throw Error(`Unsupported chunk type: ${e}`)}}})}}},tv=e=>({type:"enum",jsonSchema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},validateFinalResult(t){if(!(0,ep.wA)(t)||"string"!=typeof t.result)return{success:!1,error:new ep.Gz({value:t,cause:'value must be an object that contains a string in the "result" property.'})};let r=t.result;return e.includes(r)?{success:!0,value:r}:{success:!1,error:new ep.Gz({value:t,cause:"value must be a string in the enum"})}},validatePartialResult(){throw new ep.A_({functionality:"partial results in enum mode"})},createElementStream(){throw new ep.A_({functionality:"element streams in enum mode"})}}),tb=(0,f.bF)({prefix:"aiobj-",size:24});async function tw({model:e,enum:t,schema:r,schemaName:a,schemaDescription:o,mode:n,output:s="object",system:i,prompt:l,messages:u,maxRetries:c,abortSignal:p,headers:d,experimental_telemetry:m,experimental_providerMetadata:h,_internal:{generateId:g=tb,currentDate:y=()=>new Date}={},...v}){var b;(function({output:e,mode:t,schema:r,schemaName:a,schemaDescription:o,enumValues:n}){if(null!=e&&"object"!==e&&"array"!==e&&"enum"!==e&&"no-schema"!==e)throw new e2({parameter:"output",value:e,message:"Invalid output type."});if("no-schema"===e){if("auto"===t||"tool"===t)throw new e2({parameter:"mode",value:t,message:'Mode must be "json" for no-schema output.'});if(null!=r)throw new e2({parameter:"schema",value:r,message:"Schema is not supported for no-schema output."});if(null!=o)throw new e2({parameter:"schemaDescription",value:o,message:"Schema description is not supported for no-schema output."});if(null!=a)throw new e2({parameter:"schemaName",value:a,message:"Schema name is not supported for no-schema output."});if(null!=n)throw new e2({parameter:"enumValues",value:n,message:"Enum values are not supported for no-schema output."})}if("object"===e){if(null==r)throw new e2({parameter:"schema",value:r,message:"Schema is required for object output."});if(null!=n)throw new e2({parameter:"enumValues",value:n,message:"Enum values are not supported for object output."})}if("array"===e){if(null==r)throw new e2({parameter:"schema",value:r,message:"Element schema is required for array output."});if(null!=n)throw new e2({parameter:"enumValues",value:n,message:"Enum values are not supported for array output."})}if("enum"===e){if(null!=r)throw new e2({parameter:"schema",value:r,message:"Schema is not supported for enum output."});if(null!=o)throw new e2({parameter:"schemaDescription",value:o,message:"Schema description is not supported for enum output."});if(null!=a)throw new e2({parameter:"schemaName",value:a,message:"Schema name is not supported for enum output."});if(null==n)throw new e2({parameter:"enumValues",value:n,message:"Enum values are required for enum output."});for(let e of n)if("string"!=typeof e)throw new e2({parameter:"enumValues",value:e,message:"Enum values must be strings."})}})({output:s,mode:n,schema:r,schemaName:a,schemaDescription:o,enumValues:t});let w=function({output:e,schema:t,enumValues:r}){switch(e){case"object":return tg(ec(t));case"array":return ty(ec(t));case"enum":return tv(r);case"no-schema":return th;default:throw Error(`Unsupported output: ${e}`)}}({output:s,schema:r,enumValues:t});"no-schema"===w.type&&void 0===n&&(n="json");let x=e_({model:e,telemetry:m,headers:d,settings:{...v,maxRetries:c}}),k=eA({isEnabled:null!=(b=null==m?void 0:m.isEnabled)&&b});return eM({name:"ai.generateObject",attributes:eN({telemetry:m,attributes:{...eT({operationId:"ai.generateObject",telemetry:m}),...x,"ai.prompt":{input:()=>JSON.stringify({system:i,prompt:l,messages:u})},"ai.schema":null!=w.jsonSchema?{input:()=>JSON.stringify(w.jsonSchema)}:void 0,"ai.schema.name":a,"ai.schema.description":o,"ai.settings.output":w.type,"ai.settings.mode":n}}),tracer:k,fn:async t=>{let r,s,b,T,_,S,I,E;let j=ex({maxRetries:c});switch(("auto"===n||null==n)&&(n=e.defaultObjectGenerationMode),n){case"json":{let t=ts({system:null==w.jsonSchema?tu({prompt:i}):e.supportsStructuredOutputs?i:tu({prompt:i,schema:w.jsonSchema}),prompt:l,messages:u}),c=await eK({prompt:t,modelSupportsImageUrls:e.supportsImageUrls}),f=t.type,A=await j(()=>eM({name:"ai.generateObject.doGenerate",attributes:eN({telemetry:m,attributes:{...eT({operationId:"ai.generateObject.doGenerate",telemetry:m}),...x,"ai.prompt.format":{input:()=>f},"ai.prompt.messages":{input:()=>JSON.stringify(c)},"ai.settings.mode":n,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":v.frequencyPenalty,"gen_ai.request.max_tokens":v.maxTokens,"gen_ai.request.presence_penalty":v.presencePenalty,"gen_ai.request.temperature":v.temperature,"gen_ai.request.top_k":v.topK,"gen_ai.request.top_p":v.topP}}),tracer:k,fn:async t=>{var r,n,s,i,l,u;let b=await e.doGenerate({mode:{type:"object-json",schema:w.jsonSchema,name:a,description:o},...e7(v),inputFormat:f,prompt:c,providerMetadata:h,abortSignal:p,headers:d});if(void 0===b.text)throw new tm;let x={id:null!=(n=null==(r=b.response)?void 0:r.id)?n:g(),timestamp:null!=(i=null==(s=b.response)?void 0:s.timestamp)?i:y(),modelId:null!=(u=null==(l=b.response)?void 0:l.modelId)?u:e.modelId};return t.setAttributes(eN({telemetry:m,attributes:{"ai.response.finishReason":b.finishReason,"ai.response.object":{output:()=>b.text},"ai.response.id":x.id,"ai.response.model":x.modelId,"ai.response.timestamp":x.timestamp.toISOString(),"ai.usage.promptTokens":b.usage.promptTokens,"ai.usage.completionTokens":b.usage.completionTokens,"ai.finishReason":b.finishReason,"ai.result.object":{output:()=>b.text},"gen_ai.response.finish_reasons":[b.finishReason],"gen_ai.response.id":x.id,"gen_ai.response.model":x.modelId,"gen_ai.usage.prompt_tokens":b.usage.promptTokens,"gen_ai.usage.completion_tokens":b.usage.completionTokens}})),{...b,objectText:b.text,responseData:x}}}));r=A.objectText,s=A.finishReason,b=A.usage,T=A.warnings,_=A.rawResponse,I=A.logprobs,E=A.providerMetadata,S=A.responseData;break}case"tool":{let t=ts({system:i,prompt:l,messages:u}),c=await eK({prompt:t,modelSupportsImageUrls:e.supportsImageUrls}),f=t.type,A=await j(()=>eM({name:"ai.generateObject.doGenerate",attributes:eN({telemetry:m,attributes:{...eT({operationId:"ai.generateObject.doGenerate",telemetry:m}),...x,"ai.prompt.format":{input:()=>f},"ai.prompt.messages":{input:()=>JSON.stringify(c)},"ai.settings.mode":n,"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":v.frequencyPenalty,"gen_ai.request.max_tokens":v.maxTokens,"gen_ai.request.presence_penalty":v.presencePenalty,"gen_ai.request.temperature":v.temperature,"gen_ai.request.top_k":v.topK,"gen_ai.request.top_p":v.topP}}),tracer:k,fn:async t=>{var r,n,s,i,l,u,b,x;let k=await e.doGenerate({mode:{type:"object-tool",tool:{type:"function",name:null!=a?a:"json",description:null!=o?o:"Respond with a JSON object.",parameters:w.jsonSchema}},...e7(v),inputFormat:f,prompt:c,providerMetadata:h,abortSignal:p,headers:d}),T=null==(n=null==(r=k.toolCalls)?void 0:r[0])?void 0:n.args;if(void 0===T)throw new tm;let _={id:null!=(i=null==(s=k.response)?void 0:s.id)?i:g(),timestamp:null!=(u=null==(l=k.response)?void 0:l.timestamp)?u:y(),modelId:null!=(x=null==(b=k.response)?void 0:b.modelId)?x:e.modelId};return t.setAttributes(eN({telemetry:m,attributes:{"ai.response.finishReason":k.finishReason,"ai.response.object":{output:()=>T},"ai.response.id":_.id,"ai.response.model":_.modelId,"ai.response.timestamp":_.timestamp.toISOString(),"ai.usage.promptTokens":k.usage.promptTokens,"ai.usage.completionTokens":k.usage.completionTokens,"ai.finishReason":k.finishReason,"ai.result.object":{output:()=>T},"gen_ai.response.finish_reasons":[k.finishReason],"gen_ai.response.id":_.id,"gen_ai.response.model":_.modelId,"gen_ai.usage.input_tokens":k.usage.promptTokens,"gen_ai.usage.output_tokens":k.usage.completionTokens}})),{...k,objectText:T,responseData:_}}}));r=A.objectText,s=A.finishReason,b=A.usage,T=A.warnings,_=A.rawResponse,I=A.logprobs,E=A.providerMetadata,S=A.responseData;break}case void 0:throw Error("Model does not have a default object generation mode.");default:{let e=n;throw Error(`Unsupported mode: ${e}`)}}let A=(0,f.NX)({text:r});if(!A.success)throw A.error;let M=w.validateFinalResult(A.value);if(!M.success)throw M.error;return t.setAttributes(eN({telemetry:m,attributes:{"ai.response.finishReason":s,"ai.response.object":{output:()=>JSON.stringify(M.value)},"ai.usage.promptTokens":b.promptTokens,"ai.usage.completionTokens":b.completionTokens,"ai.finishReason":s,"ai.result.object":{output:()=>JSON.stringify(M.value)}}})),new tx({object:M.value,finishReason:s,usage:ti(b),warnings:T,response:{...S,headers:null==_?void 0:_.headers},logprobs:I,providerMetadata:E})}})}var tx=class{constructor(e){this.object=e.object,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.experimental_providerMetadata=e.providerMetadata,this.response=e.response,this.rawResponse={headers:e.response.headers},this.logprobs=e.logprobs}toJsonResponse(e){var t;return new Response(JSON.stringify(this.object),{status:null!=(t=null==e?void 0:e.status)?t:200,headers:tl(e,{contentType:"application/json; charset=utf-8"})})}};function tk(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function tT(){var e,t;return null!=(t=null==(e=null==globalThis?void 0:globalThis.performance)?void 0:e.now())?t:Date.now()}function t_(e,{contentType:t,dataStreamVersion:r}){let a={};if((null==e?void 0:e.headers)!=null)for(let[t,r]of Object.entries(e.headers))a[t]=r;return null==a["Content-Type"]&&(a["Content-Type"]=t),void 0!==r&&(a["X-Vercel-AI-Data-Stream"]=r),a}function tS({response:e,status:t,statusText:r,headers:a,stream:o}){e.writeHead(null!=t?t:200,r,a);let n=o.getReader();(async()=>{try{for(;;){let{done:t,value:r}=await n.read();if(t)break;e.write(r)}}catch(e){throw e}finally{e.end()}})()}(0,f.bF)({prefix:"aiobj-",size:24});var tI="AI_InvalidToolArgumentsError",tE=`vercel.ai.error.${tI}`,tj=Symbol.for(tE),tA=class extends ep.AX{constructor({toolArgs:e,toolName:t,cause:r,message:a=`Invalid arguments for tool ${t}: ${(0,ep.e$)(r)}`}){super({name:tI,message:a,cause:r}),this[c]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return ep.AX.hasMarker(e,tE)}static isInvalidToolArgumentsError(e){return e instanceof Error&&e.name===tI&&"string"==typeof e.toolName&&"string"==typeof e.toolArgs}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,toolName:this.toolName,toolArgs:this.toolArgs}}};c=tj;var tM="AI_NoSuchToolError",tN=`vercel.ai.error.${tM}`,tP=Symbol.for(tN),tR=class extends ep.AX{constructor({toolName:e,availableTools:t,message:r=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:tM,message:r}),this[p]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return ep.AX.hasMarker(e,tN)}static isNoSuchToolError(e){return e instanceof Error&&e.name===tM&&"toolName"in e&&void 0!=e.toolName&&"string"==typeof e.name}toJSON(){return{name:this.name,message:this.message,stack:this.stack,toolName:this.toolName,availableTools:this.availableTools}}};p=tP;var tO="AI_MessageConversionError",tC=`vercel.ai.error.${tO}`,t$=Symbol.for(tC),tq=class extends ep.AX{constructor({originalMessage:e,message:t}){super({name:tO,message:t}),this[d]=!0,this.originalMessage=e}static isInstance(e){return ep.AX.hasMarker(e,tC)}};d=t$;var tZ=/^([\s\S]*?)(\s+)(\S*)$/;function tz({text:e="",toolCalls:t,toolResults:r}){let a=[];return a.push({role:"assistant",content:[{type:"text",text:e},...t]}),r.length>0&&a.push({role:"tool",content:r.map(e=>({type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result}))}),a}function tU(e,t){let r,a;let o=e.getReader(),n=t.getReader(),s=!1,i=!1;async function l(e){try{null==r&&(r=o.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==a&&(a=n.read());let t=await a;a=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(s){await u(e);return}if(i){await l(e);return}null==r&&(r=o.read()),null==a&&(a=n.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:o})),a.then(e=>({result:e,reader:n}))]);t.done||e.enqueue(t.value),c===o?(r=void 0,t.done&&(await u(e),s=!0)):(a=void 0,t.done&&(i=!0,await l(e)))}catch(t){e.error(t)}},cancel(){o.cancel(),n.cancel()}})}(0,f.bF)({prefix:"aitxt-",size:24});var tD=(0,f.bF)({prefix:"aitxt-",size:24});async function tL({model:e,tools:t,toolChoice:r,system:a,prompt:o,messages:n,maxRetries:s,abortSignal:i,headers:l,maxToolRoundtrips:u=0,maxSteps:c=null!=u?u+1:1,experimental_continueSteps:p=!1,experimental_telemetry:d,experimental_providerMetadata:m,experimental_toolCallStreaming:h=!1,onChunk:g,onFinish:y,onStepFinish:v,_internal:{now:b=tT,generateId:w=tD,currentDate:x=()=>new Date}={},...k}){var T;if(c<1)throw new e2({parameter:"maxSteps",value:c,message:"maxSteps must be at least 1"});let _=e_({model:e,telemetry:d,headers:l,settings:{...k,maxRetries:s}}),S=eA({isEnabled:null!=(T=null==d?void 0:d.isEnabled)&&T});return eM({name:"ai.streamText",attributes:eN({telemetry:d,attributes:{...eT({operationId:"ai.streamText",telemetry:d}),..._,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:o,messages:n})},"ai.settings.maxSteps":c}}),tracer:S,endWhenDone:!1,fn:async u=>{let T=ex({maxRetries:s}),I=async({promptMessages:a,promptType:o})=>{let{result:{stream:n,warnings:s,rawResponse:u},doStreamSpan:c,startTimestampMs:p}=await T(()=>eM({name:"ai.streamText.doStream",attributes:eN({telemetry:d,attributes:{...eT({operationId:"ai.streamText.doStream",telemetry:d}),..._,"ai.prompt.format":{input:()=>o},"ai.prompt.messages":{input:()=>JSON.stringify(a)},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":k.frequencyPenalty,"gen_ai.request.max_tokens":k.maxTokens,"gen_ai.request.presence_penalty":k.presencePenalty,"gen_ai.request.stop_sequences":k.stopSequences,"gen_ai.request.temperature":k.temperature,"gen_ai.request.top_k":k.topK,"gen_ai.request.top_p":k.topP}}),tracer:S,endWhenDone:!1,fn:async n=>({startTimestampMs:b(),doStreamSpan:n,result:await e.doStream({mode:{type:"regular",...function({tools:e,toolChoice:t}){return null!=e&&Object.keys(e).length>0?{tools:Object.entries(e).map(([e,t])=>({type:"function",name:e,description:t.description,parameters:ec(t.parameters).jsonSchema})),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:t,toolChoice:r})},...e7(k),inputFormat:o,prompt:a,providerMetadata:m,abortSignal:i,headers:l})})}));return{result:{stream:function({tools:e,generatorStream:t,toolCallStreaming:r,tracer:a,telemetry:o}){let n=!1,s=new Set,i=null,l=new ReadableStream({start(e){i=e}}),u={},c=new TransformStream({transform(t,l){let c=t.type;switch(c){case"text-delta":case"response-metadata":case"error":l.enqueue(t);break;case"tool-call-delta":r&&(u[t.toolCallId]||(l.enqueue({type:"tool-call-streaming-start",toolCallId:t.toolCallId,toolName:t.toolName}),u[t.toolCallId]=!0),l.enqueue({type:"tool-call-delta",toolCallId:t.toolCallId,toolName:t.toolName,argsTextDelta:t.argsTextDelta}));break;case"tool-call":{let r=t.toolName;if(null==e){i.enqueue({type:"error",error:new tR({toolName:t.toolName})});break}let u=e[r];if(null==u){i.enqueue({type:"error",error:new tR({toolName:t.toolName,availableTools:Object.keys(e)})});break}try{let r=function({toolCall:e,tools:t}){let r=e.toolName;if(null==t)throw new tR({toolName:e.toolName});let a=t[r];if(null==a)throw new tR({toolName:e.toolName,availableTools:Object.keys(t)});let o=ec(a.parameters),n=""===e.args.trim()?(0,f.pW)({value:{},schema:o}):(0,f.NX)({text:e.args,schema:o});if(!1===n.success)throw new tA({toolName:r,toolArgs:e.args,cause:n.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:r,args:n.value}}({toolCall:t,tools:e});if(l.enqueue(r),null!=u.execute){let e=(0,f.Ox)();s.add(e),eM({name:"ai.toolCall",attributes:eN({telemetry:o,attributes:{...eT({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":r.toolName,"ai.toolCall.id":r.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(r.args)}}}),tracer:a,fn:async t=>u.execute(r.args).then(a=>{i.enqueue({...r,type:"tool-result",result:a}),s.delete(e),n&&0===s.size&&i.close();try{t.setAttributes(eN({telemetry:o,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(a)}}}))}catch(e){}},t=>{i.enqueue({type:"error",error:t}),s.delete(e),n&&0===s.size&&i.close()})})}}catch(e){i.enqueue({type:"error",error:e})}break}case"finish":l.enqueue({type:"finish",finishReason:t.finishReason,logprobs:t.logprobs,usage:ti(t.usage),experimental_providerMetadata:t.providerMetadata});break;default:throw Error(`Unhandled chunk type: ${c}`)}},flush(){n=!0,0===s.size&&i.close()}});return new ReadableStream({start:async e=>Promise.all([t.pipeThrough(c).pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){}})),l.pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){e.close()}}))])})}({tools:t,generatorStream:n,toolCallStreaming:h,tracer:S,telemetry:d}),warnings:s,rawResponse:u},doStreamSpan:c,startTimestampMs:p}},E=await eK({prompt:ts({system:a,prompt:o,messages:n}),modelSupportsImageUrls:e.supportsImageUrls}),{result:{stream:j,warnings:A,rawResponse:M},doStreamSpan:N,startTimestampMs:P}=await I({promptType:ts({system:a,prompt:o,messages:n}).type,promptMessages:E});return new tJ({stream:j,warnings:A,rawResponse:M,onChunk:g,onFinish:y,onStepFinish:v,rootSpan:u,doStreamSpan:N,telemetry:d,startTimestampMs:P,maxSteps:c,continueSteps:p,startStep:I,promptMessages:E,modelId:e.modelId,now:b,currentDate:x,generateId:w})}})}var tJ=class{constructor({stream:e,warnings:t,rawResponse:r,onChunk:a,onFinish:o,onStepFinish:n,rootSpan:s,doStreamSpan:i,telemetry:l,startTimestampMs:u,maxSteps:c,continueSteps:p,startStep:d,promptMessages:m,modelId:f,now:h,currentDate:g,generateId:y}){this.warnings=t,this.rawResponse=r;let{resolve:v,promise:b}=tk();this.usage=b;let{resolve:w,promise:x}=tk();this.finishReason=x;let{resolve:k,promise:T}=tk();this.text=T;let{resolve:_,promise:S}=tk();this.toolCalls=S;let{resolve:I,promise:E}=tk();this.toolResults=E;let{resolve:j,promise:A}=tk();this.steps=A;let{resolve:M,promise:N}=tk();this.experimental_providerMetadata=N;let{resolve:P,promise:R}=tk();this.response=R;let{resolve:O,promise:C}=tk();this.responseMessages=C;let{stream:$,addStream:q,close:Z}=function(){let e=[],t=null,r=!1,a=async()=>{if(r&&0===e.length){null==t||t.close();return}if(0!==e.length)try{let{value:o,done:n}=await e[0].read();n?(e.shift(),e.length>0?await a():r&&(null==t||t.close())):null==t||t.enqueue(o)}catch(a){null==t||t.error(a),e.shift(),r&&0===e.length&&(null==t||t.close())}};return{stream:new ReadableStream({start(e){t=e},pull:a,async cancel(){for(let t of e)await t.cancel();e=[],r=!0}}),addStream:t=>{if(r)throw Error("Cannot add inner stream: outer stream is closed");e.push(t.getReader())},close:()=>{r=!0,0===e.length&&(null==t||t.close())}}}();this.originalStream=$;let z=[],U=this;!function e({stream:i,startTimestamp:u,doStreamSpan:m,currentStep:b,promptMessages:x,usage:T={promptTokens:0,completionTokens:0,totalTokens:0},stepType:S,previousStepText:E=""}){let A,N;let R=[],C=[],$="unknown",D={promptTokens:0,completionTokens:0,totalTokens:0},L=!0,J="",F="continue"===S?E:"",G={id:y(),timestamp:g(),modelId:f},B="",V=!1;async function X({controller:e,chunk:t}){e.enqueue(t),J+=t.textDelta,F+=t.textDelta,V=!0,await (null==a?void 0:a({chunk:t}))}q(i.pipeThrough(new TransformStream({async transform(e,t){var r,o,n;if(L){let e=h()-u;L=!1,m.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":e,"ai.stream.msToFirstChunk":e}),m.setAttributes({"ai.response.msToFirstChunk":e,"ai.stream.msToFirstChunk":e})}if("text-delta"===e.type&&0===e.textDelta.length)return;let s=e.type;switch(s){case"text-delta":if(p){let r=function(e){let t=e.match(tZ);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}(B+=e.textDelta);null!=r&&(B=r.suffix,await X({controller:t,chunk:{type:"text-delta",textDelta:r.prefix+r.whitespace}}))}else await X({controller:t,chunk:e});break;case"tool-call":t.enqueue(e),R.push(e),await (null==a?void 0:a({chunk:e}));break;case"tool-result":t.enqueue(e),C.push(e),await (null==a?void 0:a({chunk:e}));break;case"response-metadata":G={id:null!=(r=e.id)?r:G.id,timestamp:null!=(o=e.timestamp)?o:G.timestamp,modelId:null!=(n=e.modelId)?n:G.modelId};break;case"finish":{D=e.usage,$=e.finishReason,A=e.experimental_providerMetadata,N=e.logprobs;let t=h()-u;m.addEvent("ai.stream.finish"),m.setAttributes({"ai.response.msToFinish":t,"ai.response.avgCompletionTokensPerSecond":1e3*D.completionTokens/t});break}case"tool-call-streaming-start":case"tool-call-delta":t.enqueue(e),await (null==a?void 0:a({chunk:e}));break;case"error":t.enqueue(e),$="error";break;default:throw Error(`Unknown chunk type: ${s}`)}},async flush(a){let i=R.length>0?JSON.stringify(R):void 0,u="done";b+1<c&&(p&&"length"===$&&0===R.length?u="continue":R.length>0&&C.length===R.length&&(u="tool-result")),p&&B.length>0&&("continue"!==u||"continue"===S&&!V)&&(await X({controller:a,chunk:{type:"text-delta",textDelta:B}}),B="");try{m.setAttributes(eN({telemetry:l,attributes:{"ai.response.finishReason":$,"ai.response.text":{output:()=>J},"ai.response.toolCalls":{output:()=>i},"ai.response.id":G.id,"ai.response.model":G.modelId,"ai.response.timestamp":G.timestamp.toISOString(),"ai.usage.promptTokens":D.promptTokens,"ai.usage.completionTokens":D.completionTokens,"ai.finishReason":$,"ai.result.text":{output:()=>J},"ai.result.toolCalls":{output:()=>i},"gen_ai.response.finish_reasons":[$],"gen_ai.response.id":G.id,"gen_ai.response.model":G.modelId,"gen_ai.usage.input_tokens":D.promptTokens,"gen_ai.usage.output_tokens":D.completionTokens}}))}catch(e){}finally{m.end()}a.enqueue({type:"step-finish",finishReason:$,usage:D,experimental_providerMetadata:A,logprobs:N,response:G,isContinued:"continue"===u});let f={stepType:S,text:J,toolCalls:R,toolResults:C,finishReason:$,usage:D,warnings:U.warnings,logprobs:N,response:G,rawResponse:U.rawResponse,experimental_providerMetadata:A,isContinued:"continue"===u};z.push(f),await (null==n?void 0:n(f));let h={promptTokens:T.promptTokens+D.promptTokens,completionTokens:T.completionTokens+D.completionTokens,totalTokens:T.totalTokens+D.totalTokens};if("done"!==u){"continue"===S?x[x.length-1].content.push({text:J,type:"text"}):x.push(...tz({text:J,toolCalls:R,toolResults:C}).map(e=>eH(e,null)));let{result:t,doStreamSpan:r,startTimestampMs:a}=await d({promptType:"messages",promptMessages:x});U.warnings=t.warnings,U.rawResponse=t.rawResponse,e({stream:t.stream,startTimestamp:a,doStreamSpan:r,currentStep:b+1,promptMessages:x,usage:h,stepType:u,previousStepText:F});return}try{a.enqueue({type:"finish",finishReason:$,usage:h,experimental_providerMetadata:A,logprobs:N,response:G}),Z(),s.setAttributes(eN({telemetry:l,attributes:{"ai.response.finishReason":$,"ai.response.text":{output:()=>F},"ai.response.toolCalls":{output:()=>i},"ai.usage.promptTokens":h.promptTokens,"ai.usage.completionTokens":h.completionTokens,"ai.finishReason":$,"ai.result.text":{output:()=>F},"ai.result.toolCalls":{output:()=>i}}}));let e=z.reduce((e,t)=>{if("continue"===t.stepType){let r=e.pop();return"string"==typeof r.content?r.content+=t.text:r.content.push({text:t.text,type:"text"}),[...e,r]}return[...e,...tz({text:t.text,toolCalls:t.toolCalls,toolResults:t.toolResults})]},[]);v(h),w($),k(F),_(R),M(A),I(C),P({...G,headers:null==r?void 0:r.headers}),j(z),O(e),await (null==o?void 0:o({finishReason:$,logprobs:N,usage:h,text:F,toolCalls:R,toolResults:C,rawResponse:r,response:{...G,headers:null==r?void 0:r.headers},warnings:t,experimental_providerMetadata:A,steps:z,responseMessages:e}))}catch(e){a.error(e)}finally{s.end()}}})))}({stream:e,startTimestamp:u,doStreamSpan:i,currentStep:0,promptMessages:m,usage:void 0,stepType:"initial"})}teeStream(){let[e,t]=this.originalStream.tee();return this.originalStream=t,e}get textStream(){return tf(this.teeStream(),{transform(e,t){"text-delta"===e.type?t.enqueue(e.textDelta):"error"===e.type&&t.error(e.error)}})}get fullStream(){return tf(this.teeStream(),{transform(e,t){t.enqueue(e)}})}toAIStream(e={}){return this.toDataStreamInternal({callbacks:e})}toDataStreamInternal({callbacks:e={},getErrorMessage:t=()=>"",sendUsage:r=!0}={}){let a="",o=new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(t,r){if(r.enqueue(t),"text-delta"===t.type){let r=t.textDelta;a+=r,e.onToken&&await e.onToken(r),e.onText&&await e.onText(r)}},async flush(){e.onCompletion&&await e.onCompletion(a),e.onFinal&&await e.onFinal(a)}}),n=new TransformStream({transform:async(e,a)=>{let o=e.type;switch(o){case"text-delta":a.enqueue(el("text",e.textDelta));break;case"tool-call-streaming-start":a.enqueue(el("tool_call_streaming_start",{toolCallId:e.toolCallId,toolName:e.toolName}));break;case"tool-call-delta":a.enqueue(el("tool_call_delta",{toolCallId:e.toolCallId,argsTextDelta:e.argsTextDelta}));break;case"tool-call":a.enqueue(el("tool_call",{toolCallId:e.toolCallId,toolName:e.toolName,args:e.args}));break;case"tool-result":a.enqueue(el("tool_result",{toolCallId:e.toolCallId,result:e.result}));break;case"error":a.enqueue(el("error",t(e.error)));break;case"step-finish":a.enqueue(el("finish_step",{finishReason:e.finishReason,usage:r?{promptTokens:e.usage.promptTokens,completionTokens:e.usage.completionTokens}:void 0,isContinued:e.isContinued}));break;case"finish":a.enqueue(el("finish_message",{finishReason:e.finishReason,usage:r?{promptTokens:e.usage.promptTokens,completionTokens:e.usage.completionTokens}:void 0}));break;default:throw Error(`Unknown chunk type: ${o}`)}}});return this.fullStream.pipeThrough(o).pipeThrough(n).pipeThrough(new TextEncoderStream)}pipeAIStreamToResponse(e,t){return this.pipeDataStreamToResponse(e,t)}pipeDataStreamToResponse(e,t){let r=null==t?void 0:"init"in t?t.init:{headers:"headers"in t?t.headers:void 0,status:"status"in t?t.status:void 0,statusText:"statusText"in t?t.statusText:void 0},a=null==t?void 0:"data"in t?t.data:void 0,o=null==t?void 0:"getErrorMessage"in t?t.getErrorMessage:void 0,n=null==t?void 0:"sendUsage"in t?t.sendUsage:void 0;tS({response:e,status:null==r?void 0:r.status,statusText:null==r?void 0:r.statusText,headers:t_(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:o,sendUsage:n})})}pipeTextStreamToResponse(e,t){tS({response:e,status:null==t?void 0:t.status,statusText:null==t?void 0:t.statusText,headers:t_(t,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toAIStreamResponse(e){return this.toDataStreamResponse(e)}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:null==e?void 0:e.getErrorMessage,sendUsage:null==e?void 0:e.sendUsage});return(null==e?void 0:e.data)?tU(null==e?void 0:e.data.stream,t):t}toDataStreamResponse(e){var t;let r=null==e?void 0:"init"in e?e.init:{headers:"headers"in e?e.headers:void 0,status:"status"in e?e.status:void 0,statusText:"statusText"in e?e.statusText:void 0},a=null==e?void 0:"data"in e?e.data:void 0,o=null==e?void 0:"getErrorMessage"in e?e.getErrorMessage:void 0,n=null==e?void 0:"sendUsage"in e?e.sendUsage:void 0;return new Response(this.toDataStream({data:a,getErrorMessage:o,sendUsage:n}),{status:null!=(t=null==r?void 0:r.status)?t:200,statusText:null==r?void 0:r.statusText,headers:tl(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:null!=(t=null==e?void 0:e.status)?t:200,headers:tl(e,{contentType:"text/plain; charset=utf-8"})})}},tF=({model:e,middleware:{transformParams:t,wrapGenerate:r,wrapStream:a},modelId:o,providerId:n})=>{async function s({params:e,type:r}){return t?await t({params:e,type:r}):e}return{specificationVersion:"v1",provider:null!=n?n:e.provider,modelId:null!=o?o:e.modelId,defaultObjectGenerationMode:e.defaultObjectGenerationMode,supportsImageUrls:e.supportsImageUrls,supportsStructuredOutputs:e.supportsStructuredOutputs,async doGenerate(t){let a=await s({params:t,type:"generate"}),o=async()=>e.doGenerate(a);return r?r({doGenerate:o,params:a,model:e}):o()},async doStream(t){let r=await s({params:t,type:"stream"}),o=async()=>e.doStream(r);return a?a({doStream:o,params:r,model:e}):o()}}};function tG(e){let t=[];for(let r of e){let{role:e,content:a,toolInvocations:o,experimental_attachments:n}=r;switch(e){case"system":t.push({role:"system",content:a});break;case"user":t.push({role:"user",content:n?[{type:"text",text:a},...function(e){var t,r,a;let o=[];for(let n of e){let e;try{e=new URL(n.url)}catch(e){throw Error(`Invalid URL: ${n.url}`)}switch(e.protocol){case"http:":case"https:":if(null==(t=n.contentType)?void 0:t.startsWith("image/"))o.push({type:"image",image:e});else{if(!n.contentType)throw Error("If the attachment is not an image, it must specify a content type");o.push({type:"file",data:e,mimeType:n.contentType})}break;case"data:":{let e,t,s;try{[e,t]=n.url.split(","),s=e.split(";")[0].split(":")[1]}catch(e){throw Error(`Error processing data URL: ${n.url}`)}if(null==s||null==t)throw Error(`Invalid data URL format: ${n.url}`);if(null==(r=n.contentType)?void 0:r.startsWith("image/"))o.push({type:"image",image:eF(t)});else if(null==(a=n.contentType)?void 0:a.startsWith("text/"))o.push({type:"text",text:function(e){try{return new TextDecoder().decode(e)}catch(e){throw Error("Error decoding Uint8Array to text")}}(eF(t))});else{if(!n.contentType)throw Error("If the attachment is not an image or text, it must specify a content type");o.push({type:"file",data:t,mimeType:n.contentType})}break}default:throw Error(`Unsupported URL protocol: ${e.protocol}`)}}return o}(n)]:a});break;case"assistant":if(null==o){t.push({role:"assistant",content:a});break}t.push({role:"assistant",content:[{type:"text",text:a},...o.map(({toolCallId:e,toolName:t,args:r})=>({type:"tool-call",toolCallId:e,toolName:t,args:r}))]}),t.push({role:"tool",content:o.map(e=>{if(!("result"in e))throw new tq({originalMessage:r,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:t,toolName:a,args:o,result:n}=e;return{type:"tool-result",toolCallId:t,toolName:a,args:o,result:n}})});break;case"function":case"data":case"tool":break;default:throw new tq({originalMessage:r,message:`Unsupported role: ${e}`})}}return t}var tB="AI_NoSuchProviderError",tV=`vercel.ai.error.${tB}`,tX=Symbol.for(tV);function tW(e){let t=new TextEncoder,r="",a=e||{};return new TransformStream({async start(){a.onStart&&await a.onStart()},async transform(e,o){let n="string"==typeof e?e:e.content;o.enqueue(t.encode(n)),r+=n,a.onToken&&await a.onToken(n),a.onText&&"string"==typeof e&&await a.onText(e)},async flush(){let e="experimental_onFunctionCall"in a;a.onCompletion&&await a.onCompletion(r),a.onFinal&&!e&&await a.onFinal(r)}})}ep.JJ,m=tX;function tK(){let e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:async(r,a)=>{let o=t.decode(r);a.enqueue(e.encode(el("text",o)))}})}new TextDecoder("utf-8");function tH(e,t){return tY(e,t)}function tY(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e){t.enqueue(e);return}if("event"in e){"on_chat_model_stream"===e.event&&t0(null==(r=e.data)?void 0:r.chunk,t);return}t0(e,t)}})).pipeThrough(tW(t)).pipeThrough(tK())}function tQ(e,t){var r;let a=tY(e,null==t?void 0:t.callbacks),o=null==t?void 0:t.data,n=null==t?void 0:t.init;return new Response(o?tU(o.stream,a):a,{status:null!=(r=null==n?void 0:n.status)?r:200,statusText:null==n?void 0:n.statusText,headers:tl(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function t0(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function t1(e,t){return(function(e){let t;let r=e[Symbol.asyncIterator](),a=(t=!0,e=>(t&&(e=e.trimStart())&&(t=!1),e));return new ReadableStream({async pull(e){var t;let{value:o,done:n}=await r.next();if(n){e.close();return}let s=a(null!=(t=o.delta)?t:"");s&&e.enqueue(s)}})})(e).pipeThrough(tW(t)).pipeThrough(tK())}function t2(e,t={}){var r;let{init:a,data:o,callbacks:n}=t,s=t1(e,n);return new Response(o?tU(o.stream,s):s,{status:null!=(r=null==a?void 0:a.status)?r:200,statusText:null==a?void 0:a.statusText,headers:tl(a,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}eh({},{toAIStream:()=>tH,toDataStream:()=>tY,toDataStreamResponse:()=>tQ}),eh({},{toDataStream:()=>t1,toDataStreamResponse:()=>t2});Symbol("internal_openai_fn_messages"),Response;var t7=f.Ox},57119:(e,t,r)=>{r.d(t,{W:()=>a});function a(){for(var e,t,r=0,a="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=function e(t){var r,a,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(a=e(t[r]))&&(o&&(o+=" "),o+=a)}else for(a in t)t[a]&&(o&&(o+=" "),o+=a)}return o}(e))&&(a&&(a+=" "),a+=t);return a}},80106:(e,t,r)=>{r.d(t,{m6:()=>W});let a=e=>{let t=i(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),o(r,t)||s(e)},getConflictingClassGroupIds:(e,t)=>{let o=r[e]||[];return t&&a[e]?[...o,...a[e]]:o}}},o=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],a=t.nextPart.get(r),n=a?o(e.slice(1),a):void 0;if(n)return n;if(0===t.validators.length)return;let s=e.join("-");return t.validators.find(({validator:e})=>e(s))?.classGroupId},n=/^\[(.+)\]$/,s=e=>{if(n.test(e)){let t=n.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},i=e=>{let{theme:t,prefix:r}=e,a={nextPart:new Map,validators:[]};return p(Object.entries(e.classGroups),r).forEach(([e,r])=>{l(r,a,e,t)}),a},l=(e,t,r,a)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:u(t,e)).classGroupId=r;return}if("function"==typeof e){if(c(e)){l(e(a),t,r,a);return}t.validators.push({validator:e,classGroupId:r});return}Object.entries(e).forEach(([e,o])=>{l(o,u(t,e),r,a)})})},u=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},c=e=>e.isThemeGetter,p=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,d=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,a=new Map,o=(o,n)=>{r.set(o,n),++t>e&&(t=0,a=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=a.get(e))?(o(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):o(e,t)}}},m=e=>{let{separator:t,experimentalParseClassName:r}=e,a=1===t.length,o=t[0],n=t.length,s=e=>{let r;let s=[],i=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===i){if(c===o&&(a||e.slice(u,u+n)===t)){s.push(e.slice(l,u)),l=u+n;continue}if("/"===c){r=u;continue}}"["===c?i++:"]"===c&&i--}let u=0===s.length?e:e.substring(l),c=u.startsWith("!"),p=c?u.substring(1):u;return{modifiers:s,hasImportantModifier:c,baseClassName:p,maybePostfixModifierPosition:r&&r>l?r-l:void 0}};return r?e=>r({className:e,parseClassName:s}):s},f=e=>{if(e.length<=1)return e;let t=[],r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},h=e=>({cache:d(e.cacheSize),parseClassName:m(e),...a(e)}),g=/\s+/,y=(e,t)=>{let{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:o}=t,n=[],s=e.trim().split(g),i="";for(let e=s.length-1;e>=0;e-=1){let t=s[e],{modifiers:l,hasImportantModifier:u,baseClassName:c,maybePostfixModifierPosition:p}=r(t),d=!!p,m=a(d?c.substring(0,p):c);if(!m){if(!d||!(m=a(c))){i=t+(i.length>0?" "+i:i);continue}d=!1}let h=f(l).join(":"),g=u?h+"!":h,y=g+m;if(n.includes(y))continue;n.push(y);let v=o(m,d);for(let e=0;e<v.length;++e){let t=v[e];n.push(g+t)}i=t+(i.length>0?" "+i:i)}return i};function v(){let e,t,r=0,a="";for(;r<arguments.length;)(e=arguments[r++])&&(t=b(e))&&(a&&(a+=" "),a+=t);return a}let b=e=>{let t;if("string"==typeof e)return e;let r="";for(let a=0;a<e.length;a++)e[a]&&(t=b(e[a]))&&(r&&(r+=" "),r+=t);return r},w=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},x=/^\[(?:([a-z-]+):)?(.+)\]$/i,k=/^\d+\/\d+$/,T=new Set(["px","full","screen"]),_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,S=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,I=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,E=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,j=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,A=e=>N(e)||T.has(e)||k.test(e),M=e=>F(e,"length",G),N=e=>!!e&&!Number.isNaN(Number(e)),P=e=>F(e,"number",N),R=e=>!!e&&Number.isInteger(Number(e)),O=e=>e.endsWith("%")&&N(e.slice(0,-1)),C=e=>x.test(e),$=e=>_.test(e),q=new Set(["length","size","percentage"]),Z=e=>F(e,q,B),z=e=>F(e,"position",B),U=new Set(["image","url"]),D=e=>F(e,U,X),L=e=>F(e,"",V),J=()=>!0,F=(e,t,r)=>{let a=x.exec(e);return!!a&&(a[1]?"string"==typeof t?a[1]===t:t.has(a[1]):r(a[2]))},G=e=>S.test(e)&&!I.test(e),B=()=>!1,V=e=>E.test(e),X=e=>j.test(e);Symbol.toStringTag;let W=function(e,...t){let r,a,o;let n=function(i){return a=(r=h(t.reduce((e,t)=>t(e),e()))).cache.get,o=r.cache.set,n=s,s(i)};function s(e){let t=a(e);if(t)return t;let n=y(e,r);return o(e,n),n}return function(){return n(v.apply(null,arguments))}}(()=>{let e=w("colors"),t=w("spacing"),r=w("blur"),a=w("brightness"),o=w("borderColor"),n=w("borderRadius"),s=w("borderSpacing"),i=w("borderWidth"),l=w("contrast"),u=w("grayscale"),c=w("hueRotate"),p=w("invert"),d=w("gap"),m=w("gradientColorStops"),f=w("gradientColorStopPositions"),h=w("inset"),g=w("margin"),y=w("opacity"),v=w("padding"),b=w("saturate"),x=w("scale"),k=w("sepia"),T=w("skew"),_=w("space"),S=w("translate"),I=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",C,t],q=()=>[C,t],U=()=>["",A,M],F=()=>["auto",N,C],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",C],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[N,C];return{cacheSize:500,separator:":",theme:{colors:[J],spacing:[A,M],blur:["none","",$,C],brightness:H(),borderColor:[e],borderRadius:["none","","full",$,C],borderSpacing:q(),borderWidth:U(),contrast:H(),grayscale:W(),hueRotate:H(),invert:W(),gap:q(),gradientColorStops:[e],gradientColorStopPositions:[O,M],inset:j(),margin:j(),opacity:H(),padding:q(),saturate:H(),scale:H(),sepia:W(),skew:H(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",C]}],container:["container"],columns:[{columns:[$]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),C]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",R,C]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",C]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",R,C]}],"grid-cols":[{"grid-cols":[J]}],"col-start-end":[{col:["auto",{span:["full",R,C]},C]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[J]}],"row-start-end":[{row:["auto",{span:[R,C]},C]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",C]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",C]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",C,t]}],"min-w":[{"min-w":[C,t,"min","max","fit"]}],"max-w":[{"max-w":[C,t,"none","full","min","max","fit","prose",{screen:[$]},$]}],h:[{h:[C,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[C,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[C,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[C,t,"auto","min","max","fit"]}],"font-size":[{text:["base",$,M]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",P]}],"font-family":[{font:[J]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",C]}],"line-clamp":[{"line-clamp":["none",N,P]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",A,C]}],"list-image":[{"list-image":["none",C]}],"list-style-type":[{list:["none","disc","decimal",C]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",A,M]}],"underline-offset":[{"underline-offset":["auto",A,C]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",C]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",C]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),z]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Z]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},D]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[n]}],"rounded-s":[{"rounded-s":[n]}],"rounded-e":[{"rounded-e":[n]}],"rounded-t":[{"rounded-t":[n]}],"rounded-r":[{"rounded-r":[n]}],"rounded-b":[{"rounded-b":[n]}],"rounded-l":[{"rounded-l":[n]}],"rounded-ss":[{"rounded-ss":[n]}],"rounded-se":[{"rounded-se":[n]}],"rounded-ee":[{"rounded-ee":[n]}],"rounded-es":[{"rounded-es":[n]}],"rounded-tl":[{"rounded-tl":[n]}],"rounded-tr":[{"rounded-tr":[n]}],"rounded-br":[{"rounded-br":[n]}],"rounded-bl":[{"rounded-bl":[n]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:B()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[A,C]}],"outline-w":[{outline:[A,M]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[A,M]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",$,L]}],"shadow-color":[{shadow:[J]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",$,C]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[p]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",C]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",C]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",C]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[R,C]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",C]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",C]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",C]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[A,M,P]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}})}};