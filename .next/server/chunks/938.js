exports.id=938,exports.ids=[938],exports.modules={18711:(e,t,s)=>{Promise.resolve().then(s.bind(s,15042))},15042:(e,t,s)=>{"use strict";s.d(t,{Chat:()=>L});var a=s(20149),n=s(81563),i=s(63606),l=s(47357),r=s(73286),o=s(85723),d=s(3831),c=s(31884);let m=(0,i.memo)(({children:e})=>(0,a.jsx)(d.UG,{remarkPlugins:[c.Z],components:{code:({node:e,inline:t,className:s,children:n,...i})=>{let l=/language-(\w+)/.exec(s||"");return!t&&l?(0,a.jsx)("pre",{...i,className:`${s} text-sm w-[80dvw] md:max-w-[500px] overflow-x-scroll bg-zinc-100 p-3 rounded-lg mt-2 dark:bg-zinc-800`,children:(0,a.jsx)("code",{className:l[1],children:n})}):(0,a.jsx)("code",{className:`${s} text-sm bg-zinc-100 dark:bg-zinc-800 py-0.5 px-1 rounded-md`,...i,children:n})},ol:({node:e,children:t,...s})=>(0,a.jsx)("ol",{className:"list-decimal list-outside ml-4",...s,children:t}),li:({node:e,children:t,...s})=>(0,a.jsx)("li",{className:"py-1",...s,children:t}),ul:({node:e,children:t,...s})=>(0,a.jsx)("ul",{className:"list-decimal list-outside ml-4",...s,children:t}),strong:({node:e,children:t,...s})=>(0,a.jsx)("span",{className:"font-semibold",...s,children:t}),a:({node:e,children:t,...s})=>(0,a.jsx)(o.default,{className:"text-blue-500 hover:underline",target:"_blank",rel:"noreferrer",...s,children:t})},children:e}),(e,t)=>e.children===t.children),u=({attachment:e,isUploading:t=!1})=>{let{name:s,url:n,contentType:i}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2 max-w-16",children:[(0,a.jsxs)("div",{className:"h-20 w-16 bg-muted rounded-md relative flex flex-col items-center justify-center",children:[i&&i.startsWith("image")?(0,a.jsx)("img",{src:n,alt:s??"An image attachment",className:"rounded-md size-full object-cover"},n):(0,a.jsx)("div",{className:""}),t&&(0,a.jsx)("div",{className:"animate-spin absolute text-zinc-500",children:(0,a.jsx)(r.c0,{})})]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500 max-w-16 truncate",children:s})]})};var x=s(98638),p=s.n(x),f=s(42786),h=s(78031);let g={latitude:37.763283,longitude:-122.41286,generationtime_ms:.027894973754882813,utc_offset_seconds:0,timezone:"GMT",timezone_abbreviation:"GMT",elevation:18,current_units:{time:"iso8601",interval:"seconds",temperature_2m:"\xb0C"},current:{time:"2024-10-07T19:30",interval:900,temperature_2m:29.3},hourly_units:{time:"iso8601",temperature_2m:"\xb0C"},hourly:{time:["2024-10-07T00:00","2024-10-07T01:00","2024-10-07T02:00","2024-10-07T03:00","2024-10-07T04:00","2024-10-07T05:00","2024-10-07T06:00","2024-10-07T07:00","2024-10-07T08:00","2024-10-07T09:00","2024-10-07T10:00","2024-10-07T11:00","2024-10-07T12:00","2024-10-07T13:00","2024-10-07T14:00","2024-10-07T15:00","2024-10-07T16:00","2024-10-07T17:00","2024-10-07T18:00","2024-10-07T19:00","2024-10-07T20:00","2024-10-07T21:00","2024-10-07T22:00","2024-10-07T23:00","2024-10-08T00:00","2024-10-08T01:00","2024-10-08T02:00","2024-10-08T03:00","2024-10-08T04:00","2024-10-08T05:00","2024-10-08T06:00","2024-10-08T07:00","2024-10-08T08:00","2024-10-08T09:00","2024-10-08T10:00","2024-10-08T11:00","2024-10-08T12:00","2024-10-08T13:00","2024-10-08T14:00","2024-10-08T15:00","2024-10-08T16:00","2024-10-08T17:00","2024-10-08T18:00","2024-10-08T19:00","2024-10-08T20:00","2024-10-08T21:00","2024-10-08T22:00","2024-10-08T23:00","2024-10-09T00:00","2024-10-09T01:00","2024-10-09T02:00","2024-10-09T03:00","2024-10-09T04:00","2024-10-09T05:00","2024-10-09T06:00","2024-10-09T07:00","2024-10-09T08:00","2024-10-09T09:00","2024-10-09T10:00","2024-10-09T11:00","2024-10-09T12:00","2024-10-09T13:00","2024-10-09T14:00","2024-10-09T15:00","2024-10-09T16:00","2024-10-09T17:00","2024-10-09T18:00","2024-10-09T19:00","2024-10-09T20:00","2024-10-09T21:00","2024-10-09T22:00","2024-10-09T23:00","2024-10-10T00:00","2024-10-10T01:00","2024-10-10T02:00","2024-10-10T03:00","2024-10-10T04:00","2024-10-10T05:00","2024-10-10T06:00","2024-10-10T07:00","2024-10-10T08:00","2024-10-10T09:00","2024-10-10T10:00","2024-10-10T11:00","2024-10-10T12:00","2024-10-10T13:00","2024-10-10T14:00","2024-10-10T15:00","2024-10-10T16:00","2024-10-10T17:00","2024-10-10T18:00","2024-10-10T19:00","2024-10-10T20:00","2024-10-10T21:00","2024-10-10T22:00","2024-10-10T23:00","2024-10-11T00:00","2024-10-11T01:00","2024-10-11T02:00","2024-10-11T03:00"],temperature_2m:[36.6,32.8,29.5,28.6,29.2,28.2,27.5,26.6,26.5,26,25,23.5,23.9,24.2,22.9,21,24,28.1,31.4,33.9,32.1,28.9,26.9,25.2,23,21.1,19.6,18.6,17.7,16.8,16.2,15.5,14.9,14.4,14.2,13.7,13.3,12.9,12.5,13.5,15.8,17.7,19.6,21,21.9,22.3,22,20.7,18.9,17.9,17.3,17,16.7,16.2,15.6,15.2,15,15,15.1,14.8,14.8,14.9,14.7,14.8,15.3,16.2,17.9,19.6,20.5,21.6,21,20.7,19.3,18.7,18.4,17.9,17.3,17,17,16.8,16.4,16.2,16,15.8,15.7,15.4,15.4,16.1,16.7,17,18.6,19,19.5,19.4,18.5,17.9,17.5,16.7,16.3,16.1]},daily_units:{time:"iso8601",sunrise:"iso8601",sunset:"iso8601"},daily:{time:["2024-10-07","2024-10-08","2024-10-09","2024-10-10","2024-10-11"],sunrise:["2024-10-07T07:15","2024-10-08T07:16","2024-10-09T07:17","2024-10-10T07:18","2024-10-11T07:19"],sunset:["2024-10-07T19:00","2024-10-08T18:58","2024-10-09T18:57","2024-10-10T18:55","2024-10-11T18:54"]}};function v(e){return Math.ceil(e)}function j({weatherAtLocation:e=g}){let t=Math.max(...e.hourly.temperature_2m.slice(0,24)),s=Math.min(...e.hourly.temperature_2m.slice(0,24)),n=(0,f._)(new Date(e.current.time),{start:new Date(e.daily.sunrise[0]),end:new Date(e.daily.sunset[0])}),[l,r]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=()=>{r(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=l?5:6,d=e.hourly.time.findIndex(t=>new Date(t)>=new Date(e.current.time)),c=e.hourly.time.slice(d,d+o),m=e.hourly.temperature_2m.slice(d,d+o);return(0,a.jsxs)("div",{className:p()("flex flex-col gap-4 rounded-2xl p-4 skeleton-bg",{"bg-blue-400":n},{"bg-indigo-900":!n}),children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,a.jsx)("div",{className:p()("size-10 rounded-full skeleton-div",{"bg-yellow-300":n},{"bg-indigo-100":!n})}),(0,a.jsxs)("div",{className:"text-4xl font-medium text-blue-50",children:[v(e.current.temperature_2m),e.current_units.temperature_2m]})]}),(0,a.jsx)("div",{className:"text-blue-50",children:`H:${v(t)}\xb0 L:${v(s)}\xb0`})]}),(0,a.jsx)("div",{className:"flex flex-row justify-between",children:c.map((t,s)=>(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("div",{className:"text-blue-100 text-xs",children:(0,h.WU)(new Date(t),"ha")}),(0,a.jsx)("div",{className:p()("size-6 rounded-full skeleton-div",{"bg-yellow-300":n},{"bg-indigo-200":!n})}),(0,a.jsxs)("div",{className:"text-blue-50 text-sm",children:[v(m[s]),e.hourly_units.temperature_2m]})]},t))})]})}var T=s(54723),b=s(24219);let y=T.fC,w=T.xz,N=i.forwardRef(({className:e,align:t="center",sideOffset:s=4,...n},i)=>(0,a.jsx)(T.h_,{children:(0,a.jsx)(T.VY,{ref:i,align:t,sideOffset:s,className:(0,b.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...n})}));N.displayName=T.VY.displayName;var z=s(56598);function k({citation:e}){let[t,s]=(0,i.useState)(!1);return(0,a.jsxs)(y,{open:t,onOpenChange:s,children:[(0,a.jsx)(w,{asChild:!0,children:(0,a.jsxs)(z.z,{variant:"ghost",size:"sm",className:"inline-flex h-5 px-1 py-0 text-xs font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-950/50 rounded-sm mx-0.5",onClick:()=>s(!t),children:["[",e.index,"]"]})}),(0,a.jsx)(N,{className:"w-80 p-3 text-sm",side:"top",align:"start",sideOffset:4,children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.aA,{size:16}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:((e,t=24)=>{if(e.length<=t)return e;let s=e.split(".").pop(),a=e.substring(0,e.lastIndexOf(".")).substring(0,t-s.length-4)+"...";return`${a}.${s}`})(e.filename)}),e.page&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Page ",e.page]})]}),(0,a.jsx)("div",{className:"text-muted-foreground leading-relaxed",children:e.snippet})]})})]})}function S({citations:e,maxVisible:t=3}){let[s,n]=(0,i.useState)(!1);if(0===e.length)return null;let l=s?e:e.slice(0,t),r=e.length>t;return(0,a.jsxs)("span",{className:"inline-flex items-center gap-0.5",children:[l.map(e=>(0,a.jsx)(k,{citation:e},e.id)),r&&!s&&(0,a.jsxs)(z.z,{variant:"ghost",size:"sm",className:"inline-flex h-5 px-1 py-0 text-xs text-muted-foreground hover:text-foreground rounded-sm",onClick:()=>n(!0),children:["+",e.length-t]})]})}let C=({chatId:e,role:t,content:s,toolInvocations:n,attachments:i})=>(0,a.jsxs)(l.E.div,{className:"flex flex-row gap-4 px-4 w-full md:w-[500px] md:px-0 first-of-type:pt-20",initial:{y:5,opacity:0},animate:{y:0,opacity:1},children:[(0,a.jsx)("div",{className:"size-[24px] border rounded-sm p-1 flex flex-col justify-center items-center shrink-0 text-zinc-500",children:"assistant"===t?(0,a.jsx)(r.Z8,{}):(0,a.jsx)(r.tB,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[s&&"string"==typeof s&&(0,a.jsxs)("div",{className:"text-zinc-800 dark:text-zinc-300 flex flex-col gap-4",children:[(0,a.jsx)(m,{children:s}),"assistant"===t&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(S,{citations:function(e){if(!e)return[];let t=[];return e.forEach(e=>{if("searchDocuments"===e.toolName&&"result"===e.state){let s=e.result;s.citations&&Array.isArray(s.citations)&&t.push(...s.citations)}}),t}(n)})})]}),n&&(0,a.jsx)("div",{className:"flex flex-col gap-4",children:n.map(e=>{let{toolName:t,toolCallId:s,state:n}=e;if("result"!==n)return(0,a.jsx)("div",{className:"skeleton",children:"getWeather"===t?(0,a.jsx)(j,{}):null},s);{let{result:n}=e;return(0,a.jsx)("div",{children:"getWeather"===t?(0,a.jsx)(j,{weatherAtLocation:n}):(0,a.jsx)("div",{children:JSON.stringify(n,null,2)})},s)}})}),i&&(0,a.jsx)("div",{className:"flex flex-row gap-2",children:i.map(e=>(0,a.jsx)(u,{attachment:e},e.url))})]})]});var D=s(70968);let _=function(){let[e,t]=(0,i.useState)({width:void 0,height:void 0});return(0,i.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e},A=i.forwardRef(({className:e,...t},s)=>(0,a.jsx)("textarea",{className:(0,b.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));A.displayName="Textarea";let I=[{title:"Analyze my research papers",label:"Please upload documents first",action:"I'd like to analyze my research papers. Could you please help me upload some documents first so I can get insights from them?"},{title:"Search my documents",label:"Please upload documents first",action:"I want to search through my documents for specific information. Could you help me upload some documents first?"}];function P({input:e,setInput:t,isLoading:s,stop:n,attachments:o,setAttachments:d,messages:c,append:m,handleSubmit:x,updateIndexingStatus:p}){let f=(0,i.useRef)(null),{width:h}=_();(0,i.useEffect)(()=>{f.current&&g()},[]);let g=()=>{f.current&&(f.current.style.height="auto",f.current.style.height=`${f.current.scrollHeight+0}px`)},v=(0,i.useRef)(null),[j,T]=(0,i.useState)([]),b=(0,i.useCallback)(()=>{x(void 0,{experimental_attachments:o}),d([]),h&&h>768&&f.current?.focus()},[o,x,d,h]),y=["image/png","image/jpeg","image/gif","application/pdf","text/plain","text/markdown","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],w=e=>e.split(".").pop()?.toLowerCase()||"",N=e=>{if(e.type&&y.includes(e.type))return!0;if(!e.type){let t={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",pdf:"application/pdf",txt:"text/plain",md:"text/markdown",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}[w(e.name)];return!!t&&y.includes(t)}return!1},k=async e=>{if(!N(e)){D.A.error("Invalid file type. Please upload images (PNG, JPEG, GIF), PDFs, text files, or Office documents.");return}if(e.size>10485760){D.A.error("File too large. Please upload files smaller than 10MB.");return}let t=["text/plain","text/markdown","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(e.type),s=new FormData;s.append("file",e);try{let a=await fetch(t?"/api/documents/upload":"/api/files/upload",{method:"POST",body:s});if(a.ok){let s=await a.json();if(t)return D.A.success(`Document "${e.name}" uploaded and indexed successfully!`),p({status:"completed",filename:e.name,chunks:s.indexing?.chunks||0}),{url:`document:${s.document.id}`,name:e.name,contentType:e.type};{let{url:e,pathname:t,contentType:a}=s;return{url:e,name:t,contentType:a}}}{let{error:e}=await a.json();D.A.error(e)}}catch(e){D.A.error("Failed to upload file, please try again!")}},S=(0,i.useCallback)(async e=>{let t=Array.from(e.target.files||[]);T(t.map(e=>e.name));try{let e=t.map(e=>k(e)),s=(await Promise.all(e)).filter(e=>void 0!==e);d(e=>[...e,...s])}catch(e){console.error("Error uploading files!",e)}finally{T([])}},[d]);return(0,a.jsxs)("div",{className:"relative w-full flex flex-col gap-4",children:[0===c.length&&0===o.length&&0===j.length&&(0,a.jsx)("div",{className:"grid sm:grid-cols-2 gap-4 w-full md:px-0 mx-auto md:max-w-[500px]",children:I.map((e,t)=>(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{delay:.05*t},className:t>1?"hidden sm:block":"block",children:(0,a.jsxs)("button",{onClick:async()=>{m({role:"user",content:e.action})},className:"border-none bg-muted/50 w-full text-left border border-zinc-200 dark:border-zinc-800 text-zinc-800 dark:text-zinc-300 rounded-lg p-3 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:e.title}),(0,a.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:e.label})]})},t))}),(0,a.jsx)("input",{type:"file",className:"fixed -top-4 -left-4 size-0.5 opacity-0 pointer-events-none",ref:v,multiple:!0,onChange:S,tabIndex:-1}),(o.length>0||j.length>0)&&(0,a.jsxs)("div",{className:"flex flex-row gap-2 overflow-x-scroll",children:[o.map(e=>(0,a.jsx)(u,{attachment:e},e.url)),j.map(e=>(0,a.jsx)(u,{attachment:{url:"",name:e,contentType:""},isUploading:!0},e))]}),(0,a.jsx)(A,{ref:f,placeholder:"Send a message...",value:e,onChange:e=>{t(e.target.value),g()},className:"min-h-[24px] overflow-hidden resize-none rounded-lg text-base bg-muted border-none",rows:3,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s?D.A.error("Please wait for the model to finish its response!"):b())}}),s?(0,a.jsx)(z.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-2 m-0.5 text-white",onClick:e=>{e.preventDefault(),n()},children:(0,a.jsx)(r.wN,{size:14})}):(0,a.jsx)(z.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-2 m-0.5 text-white",onClick:e=>{e.preventDefault(),b()},disabled:0===e.length||j.length>0,children:(0,a.jsx)(r.Hf,{size:14})}),(0,a.jsx)(z.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-10 m-0.5 dark:border-zinc-700",onClick:e=>{e.preventDefault(),v.current?.click()},variant:"outline",disabled:s,children:(0,a.jsx)(r.og,{size:14})})]})}let E=()=>(0,a.jsx)(l.E.div,{className:"max-w-[500px] mt-20 mx-4 md:mx-0",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{delay:.5},children:(0,a.jsxs)("div",{className:"border-none bg-muted/50 rounded-2xl p-6 flex flex-col gap-4 text-zinc-500 text-sm dark:text-zinc-400 dark:border-zinc-700",children:[(0,a.jsxs)("p",{className:"flex flex-row justify-center gap-4 items-center text-zinc-900 dark:text-zinc-50",children:[(0,a.jsx)(r.Kn,{}),(0,a.jsx)("span",{children:"+"}),(0,a.jsx)(r.P$,{})]}),(0,a.jsxs)("p",{children:["This is an experimental RAG (Retrieval-Augmented Generation) chatbot that combines document intelligence with general AI assistance. Upload your documents (PDF, DOCX, MD, TXT) and chat with them using semantic search, powered by"," ",(0,a.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"Pinecone"})," ","vector storage,"," ",(0,a.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"HuggingFace"})," ","embeddings, and"," ",(0,a.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"Google Gemini"}),"."]}),(0,a.jsxs)("p",{children:["Start by uploading documents using the"," ",(0,a.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"\uD83D\uDCC1 Document Manager"})," ","in the navbar, then ask questions about your content. The AI can also help with general tasks and provide weather information."]})]})},"overview");var M=s(26166);let $={parsing:"Parsing document...",chunking:"Creating chunks...",embedding:"Generating embeddings...",indexing:"Indexing to database...",completed:"Indexing complete"},G={parsing:r.c0,chunking:r.c0,embedding:r.c0,indexing:r.c0,completed:r.fU};function O({status:e,onDismiss:t}){let[s,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(e){if(n(!0),d(!1),"completed"===e.status){let e=setTimeout(()=>{d(!0),setTimeout(()=>{n(!1),t?.()},300)},5e3);return()=>clearTimeout(e)}}else n(!1)},[e,t]),!e||!s)return null;let c=G[e.status],m="completed"!==e.status;return(0,a.jsx)(M.M,{children:(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:o?0:1,y:o?-10:0,scale:o?.95:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"flex items-center gap-2 px-3 py-2 bg-muted/50 border rounded-lg text-sm mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[m?(0,a.jsx)("div",{className:"animate-spin text-blue-600",children:(0,a.jsx)(c,{size:14})}):(0,a.jsx)("div",{className:"text-green-600",children:(0,a.jsx)(c,{size:14})}),(0,a.jsx)("div",{className:"text-muted-foreground",children:(0,a.jsx)(r.aA,{size:14})}),(0,a.jsx)("span",{className:"font-medium",children:((e,t=20)=>{if(e.length<=t)return e;let s=e.split(".").pop(),a=e.substring(0,e.lastIndexOf(".")).substring(0,t-s.length-4)+"...";return`${a}.${s}`})(e.filename)}),(0,a.jsx)("span",{className:"text-muted-foreground",children:$[e.status]}),"completed"===e.status&&e.chunks&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",e.chunks," chunks)"]})]}),"completed"===e.status&&(0,a.jsx)(z.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",onClick:()=>{d(!0),setTimeout(()=>{n(!1),t?.()},300)},children:"\xd7"})]})})}function L({id:e,initialMessages:t}){let{messages:s,handleSubmit:l,input:r,setInput:o,append:d,isLoading:c,stop:m}=(0,n.RJ)({id:e,body:{id:e},initialMessages:t,maxSteps:10,onFinish:()=>{window.history.replaceState({},"",`/chat/${e}`)}}),[u,x]=function(){let e=(0,i.useRef)(null),t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let s=e.current,a=t.current;if(s&&a){let e=new MutationObserver(()=>{a.scrollIntoView({behavior:"instant",block:"end"})});return e.observe(s,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>e.disconnect()}},[]),[e,t]}(),[p,f]=(0,i.useState)([]),{status:h,updateStatus:g,clearStatus:v}=function(){let[e,t]=(0,i.useState)(null);return{status:e,updateStatus:e=>{t(e)},clearStatus:()=>{t(null)}}}();return(0,a.jsx)("div",{className:"flex flex-row justify-center pb-4 md:pb-8 h-dvh bg-background",children:(0,a.jsxs)("div",{className:"flex flex-col justify-between items-center gap-4",children:[(0,a.jsxs)("div",{ref:u,className:"flex flex-col gap-4 h-full w-dvw items-center overflow-y-scroll",children:[0===s.length&&(0,a.jsx)(E,{}),s.map(t=>(0,a.jsx)(C,{chatId:e,role:t.role,content:t.content,attachments:t.experimental_attachments,toolInvocations:t.toolInvocations},t.id)),(0,a.jsx)("div",{ref:x,className:"shrink-0 min-w-[24px] min-h-[24px]"})]}),(0,a.jsxs)("div",{className:"w-full md:max-w-[500px] max-w-[calc(100dvw-32px)] px-4 md:px-0",children:[(0,a.jsx)(O,{status:h,onDismiss:v}),(0,a.jsx)("form",{className:"flex flex-row gap-2 relative items-end w-full",children:(0,a.jsx)(P,{input:r,setInput:o,handleSubmit:l,isLoading:c,stop:m,attachments:p,setAttachments:f,messages:s,append:d,updateIndexingStatus:g})})]})]})})}},68587:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{e:()=>e});var n=s(3571);let e=(await (0,n.createProxy)(String.raw`/Users/duy/Documents/build/rag/components/custom/chat.tsx`)).Chat;a()}catch(e){a(e)}},1)},57481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(78099);let n=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},9178:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(78099);let n=e=>[{type:"image/png",width:2400,height:1256,url:(0,a.fillMetadataSegment)("/(chat)",e.params,"opengraph-image.png")+"?8190afebf6a79ae8"}]},11189:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(78099);let n=e=>[{type:"image/png",width:2400,height:1256,url:(0,a.fillMetadataSegment)("/(chat)",e.params,"twitter-image.png")+"?8190afebf6a79ae8"}]}};