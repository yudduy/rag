exports.id=938,exports.ids=[938],exports.modules={18711:(e,t,s)=>{Promise.resolve().then(s.bind(s,41456))},41456:(e,t,s)=>{"use strict";s.d(t,{Chat:()=>L});var n=s(20149),a=s(81563),i=s(63606),r=s(47357),l=s(73286),o=s(85723),d=s(3831),c=s(31884);let u=(0,i.memo)(({children:e})=>(0,n.jsx)(d.UG,{remarkPlugins:[c.Z],components:{code:({node:e,inline:t,className:s,children:a,...i})=>{let r=/language-(\w+)/.exec(s||"");return!t&&r?(0,n.jsx)("pre",{...i,className:`${s} text-sm w-[80dvw] md:max-w-[500px] overflow-x-scroll bg-zinc-100 p-3 rounded-lg mt-2 dark:bg-zinc-800`,children:(0,n.jsx)("code",{className:r[1],children:a})}):(0,n.jsx)("code",{className:`${s} text-sm bg-zinc-100 dark:bg-zinc-800 py-0.5 px-1 rounded-md`,...i,children:a})},ol:({node:e,children:t,...s})=>(0,n.jsx)("ol",{className:"list-decimal list-outside ml-4",...s,children:t}),li:({node:e,children:t,...s})=>(0,n.jsx)("li",{className:"py-1",...s,children:t}),ul:({node:e,children:t,...s})=>(0,n.jsx)("ul",{className:"list-decimal list-outside ml-4",...s,children:t}),strong:({node:e,children:t,...s})=>(0,n.jsx)("span",{className:"font-semibold",...s,children:t}),a:({node:e,children:t,...s})=>(0,n.jsx)(o.default,{className:"text-blue-500 hover:underline",target:"_blank",rel:"noreferrer",...s,children:t})},children:e}),(e,t)=>e.children===t.children),m=({attachment:e,isUploading:t=!1})=>{let{name:s,url:a,contentType:i}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-2 max-w-16",children:[(0,n.jsxs)("div",{className:"h-20 w-16 bg-muted rounded-md relative flex flex-col items-center justify-center",children:[i&&i.startsWith("image")?(0,n.jsx)("img",{src:a,alt:s??"An image attachment",className:"rounded-md size-full object-cover"},a):(0,n.jsx)("div",{className:""}),t&&(0,n.jsx)("div",{className:"animate-spin absolute text-zinc-500",children:(0,n.jsx)(l.c0,{})})]}),(0,n.jsx)("div",{className:"text-xs text-zinc-500 max-w-16 truncate",children:s})]})};var x=s(98638),p=s.n(x),f=s(42786),h=s(78031);let g={latitude:37.763283,longitude:-122.41286,generationtime_ms:.027894973754882813,utc_offset_seconds:0,timezone:"GMT",timezone_abbreviation:"GMT",elevation:18,current_units:{time:"iso8601",interval:"seconds",temperature_2m:"\xb0C"},current:{time:"2024-10-07T19:30",interval:900,temperature_2m:29.3},hourly_units:{time:"iso8601",temperature_2m:"\xb0C"},hourly:{time:["2024-10-07T00:00","2024-10-07T01:00","2024-10-07T02:00","2024-10-07T03:00","2024-10-07T04:00","2024-10-07T05:00","2024-10-07T06:00","2024-10-07T07:00","2024-10-07T08:00","2024-10-07T09:00","2024-10-07T10:00","2024-10-07T11:00","2024-10-07T12:00","2024-10-07T13:00","2024-10-07T14:00","2024-10-07T15:00","2024-10-07T16:00","2024-10-07T17:00","2024-10-07T18:00","2024-10-07T19:00","2024-10-07T20:00","2024-10-07T21:00","2024-10-07T22:00","2024-10-07T23:00","2024-10-08T00:00","2024-10-08T01:00","2024-10-08T02:00","2024-10-08T03:00","2024-10-08T04:00","2024-10-08T05:00","2024-10-08T06:00","2024-10-08T07:00","2024-10-08T08:00","2024-10-08T09:00","2024-10-08T10:00","2024-10-08T11:00","2024-10-08T12:00","2024-10-08T13:00","2024-10-08T14:00","2024-10-08T15:00","2024-10-08T16:00","2024-10-08T17:00","2024-10-08T18:00","2024-10-08T19:00","2024-10-08T20:00","2024-10-08T21:00","2024-10-08T22:00","2024-10-08T23:00","2024-10-09T00:00","2024-10-09T01:00","2024-10-09T02:00","2024-10-09T03:00","2024-10-09T04:00","2024-10-09T05:00","2024-10-09T06:00","2024-10-09T07:00","2024-10-09T08:00","2024-10-09T09:00","2024-10-09T10:00","2024-10-09T11:00","2024-10-09T12:00","2024-10-09T13:00","2024-10-09T14:00","2024-10-09T15:00","2024-10-09T16:00","2024-10-09T17:00","2024-10-09T18:00","2024-10-09T19:00","2024-10-09T20:00","2024-10-09T21:00","2024-10-09T22:00","2024-10-09T23:00","2024-10-10T00:00","2024-10-10T01:00","2024-10-10T02:00","2024-10-10T03:00","2024-10-10T04:00","2024-10-10T05:00","2024-10-10T06:00","2024-10-10T07:00","2024-10-10T08:00","2024-10-10T09:00","2024-10-10T10:00","2024-10-10T11:00","2024-10-10T12:00","2024-10-10T13:00","2024-10-10T14:00","2024-10-10T15:00","2024-10-10T16:00","2024-10-10T17:00","2024-10-10T18:00","2024-10-10T19:00","2024-10-10T20:00","2024-10-10T21:00","2024-10-10T22:00","2024-10-10T23:00","2024-10-11T00:00","2024-10-11T01:00","2024-10-11T02:00","2024-10-11T03:00"],temperature_2m:[36.6,32.8,29.5,28.6,29.2,28.2,27.5,26.6,26.5,26,25,23.5,23.9,24.2,22.9,21,24,28.1,31.4,33.9,32.1,28.9,26.9,25.2,23,21.1,19.6,18.6,17.7,16.8,16.2,15.5,14.9,14.4,14.2,13.7,13.3,12.9,12.5,13.5,15.8,17.7,19.6,21,21.9,22.3,22,20.7,18.9,17.9,17.3,17,16.7,16.2,15.6,15.2,15,15,15.1,14.8,14.8,14.9,14.7,14.8,15.3,16.2,17.9,19.6,20.5,21.6,21,20.7,19.3,18.7,18.4,17.9,17.3,17,17,16.8,16.4,16.2,16,15.8,15.7,15.4,15.4,16.1,16.7,17,18.6,19,19.5,19.4,18.5,17.9,17.5,16.7,16.3,16.1]},daily_units:{time:"iso8601",sunrise:"iso8601",sunset:"iso8601"},daily:{time:["2024-10-07","2024-10-08","2024-10-09","2024-10-10","2024-10-11"],sunrise:["2024-10-07T07:15","2024-10-08T07:16","2024-10-09T07:17","2024-10-10T07:18","2024-10-11T07:19"],sunset:["2024-10-07T19:00","2024-10-08T18:58","2024-10-09T18:57","2024-10-10T18:55","2024-10-11T18:54"]}};function b(e){return Math.ceil(e)}function j({weatherAtLocation:e=g}){let t=Math.max(...e.hourly.temperature_2m.slice(0,24)),s=Math.min(...e.hourly.temperature_2m.slice(0,24)),a=(0,f._)(new Date(e.current.time),{start:new Date(e.daily.sunrise[0]),end:new Date(e.daily.sunset[0])}),[r,l]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=()=>{l(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=r?5:6,d=e.hourly.time.findIndex(t=>new Date(t)>=new Date(e.current.time)),c=e.hourly.time.slice(d,d+o),u=e.hourly.temperature_2m.slice(d,d+o);return(0,n.jsxs)("div",{className:p()("flex flex-col gap-4 rounded-2xl p-4 skeleton-bg",{"bg-blue-400":a},{"bg-indigo-900":!a}),children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,n.jsx)("div",{className:p()("size-10 rounded-full skeleton-div",{"bg-yellow-300":a},{"bg-indigo-100":!a})}),(0,n.jsxs)("div",{className:"text-4xl font-medium text-blue-50",children:[b(e.current.temperature_2m),e.current_units.temperature_2m]})]}),(0,n.jsx)("div",{className:"text-blue-50",children:`H:${b(t)}\xb0 L:${b(s)}\xb0`})]}),(0,n.jsx)("div",{className:"flex flex-row justify-between",children:c.map((t,s)=>(0,n.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,n.jsx)("div",{className:"text-blue-100 text-xs",children:(0,h.WU)(new Date(t),"ha")}),(0,n.jsx)("div",{className:p()("size-6 rounded-full skeleton-div",{"bg-yellow-300":a},{"bg-indigo-200":!a})}),(0,n.jsxs)("div",{className:"text-blue-50 text-sm",children:[b(u[s]),e.hourly_units.temperature_2m]})]},t))})]})}var v=s(54723),T=s(24219);let y=v.fC,w=v.xz,N=i.forwardRef(({className:e,align:t="center",sideOffset:s=4,...a},i)=>(0,n.jsx)(v.h_,{children:(0,n.jsx)(v.VY,{ref:i,align:t,sideOffset:s,className:(0,T.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...a})}));N.displayName=v.VY.displayName;var k=s(56598);function z({citation:e}){let[t,s]=(0,i.useState)(!1);return(0,n.jsxs)(y,{open:t,onOpenChange:s,children:[(0,n.jsx)(w,{asChild:!0,children:(0,n.jsxs)(k.z,{variant:"ghost",size:"sm",className:"inline-flex h-5 px-1 py-0 text-xs font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-950/50 rounded-sm mx-0.5",onClick:()=>s(!t),children:["[",e.index,"]"]})}),(0,n.jsx)(N,{className:"w-80 p-3 text-sm",side:"top",align:"start",sideOffset:4,children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.aA,{size:16}),(0,n.jsx)("span",{className:"font-medium text-foreground",children:((e,t=24)=>{if(e.length<=t)return e;let s=e.split(".").pop(),n=e.substring(0,e.lastIndexOf(".")).substring(0,t-s.length-4)+"...";return`${n}.${s}`})(e.filename)}),e.page&&(0,n.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Page ",e.page]})]}),(0,n.jsx)("div",{className:"text-muted-foreground leading-relaxed",children:e.snippet})]})})]})}function S({citations:e,maxVisible:t=3}){let[s,a]=(0,i.useState)(!1);if(0===e.length)return null;let r=s?e:e.slice(0,t),l=e.length>t;return(0,n.jsxs)("span",{className:"inline-flex items-center gap-0.5",children:[r.map(e=>(0,n.jsx)(z,{citation:e},e.id)),l&&!s&&(0,n.jsxs)(k.z,{variant:"ghost",size:"sm",className:"inline-flex h-5 px-1 py-0 text-xs text-muted-foreground hover:text-foreground rounded-sm",onClick:()=>a(!0),children:["+",e.length-t]})]})}function C({citationNumber:e,source:t}){let[s,a]=(0,i.useState)(!1);return(0,n.jsxs)(y,{open:s,onOpenChange:a,children:[(0,n.jsx)(w,{asChild:!0,children:(0,n.jsxs)(k.z,{variant:"ghost",size:"sm",className:"inline-flex h-5 px-1 py-0 text-xs font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-950/50 rounded-sm mx-0.5 border border-blue-200 dark:border-blue-800",onClick:()=>a(!s),children:["[",e,"]"]})}),(0,n.jsx)(N,{className:"w-96 p-4 text-sm",side:"top",align:"start",sideOffset:4,children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 pb-2 border-b",children:[(0,n.jsx)(l.aA,{size:16}),(0,n.jsx)("span",{className:"font-semibold text-foreground",children:((e,t=24)=>{if(e.length<=t)return e;let s=e.split(".").pop(),n=e.substring(0,e.lastIndexOf(".")).substring(0,t-s.length-4)+"...";return`${n}.${s}`})(t.source)}),(0,n.jsxs)("span",{className:"text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-0.5 rounded-full",children:[(100*t.relevance_score).toFixed(1),"% match"]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Content Preview"}),(0,n.jsx)("div",{className:"text-muted-foreground leading-relaxed bg-muted/30 p-2 rounded text-xs max-h-32 overflow-y-auto",children:t.content.length>300?t.content.substring(0,300)+"...":t.content})]}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:["Click to expand • Source: ",t.source]})]})})]})}function D({content:e,ragSources:t}){let s=e.match(/\[(\d+)\]/g);if(!s||0===t.length)return null;let a=[...new Set(s.map(e=>parseInt(e.replace(/[\[\]]/g,""))))].filter(e=>e<=t.length);return 0===a.length?null:(0,n.jsxs)("div",{className:"mt-3 pt-3 border-t border-muted/50",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Sources referenced in this response:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:a.map(e=>{let s=t[e-1];return(0,n.jsx)(C,{citationNumber:e,source:s},e)})}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:[a.length," source",1!==a.length?"s":""," • Click on citation numbers for details"]})]})}let _=({chatId:e,role:t,content:s,toolInvocations:a,attachments:i,ragSources:o})=>(0,n.jsxs)(r.E.div,{className:"flex flex-row gap-4 px-4 w-full md:w-[500px] md:px-0 first-of-type:pt-20",initial:{y:5,opacity:0},animate:{y:0,opacity:1},children:[(0,n.jsx)("div",{className:"size-[24px] border rounded-sm p-1 flex flex-col justify-center items-center shrink-0 text-zinc-500",children:"assistant"===t?(0,n.jsx)(l.Z8,{}):(0,n.jsx)(l.tB,{})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[s&&"string"==typeof s&&(0,n.jsxs)("div",{className:"text-zinc-800 dark:text-zinc-300 flex flex-col gap-4",children:[(0,n.jsx)(u,{children:s}),"assistant"===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(S,{citations:function(e){if(!e)return[];let t=[];return e.forEach(e=>{if("searchDocuments"===e.toolName&&"result"===e.state){let s=e.result;s.citations&&Array.isArray(s.citations)&&t.push(...s.citations)}}),t}(a)})}),(0,n.jsx)(D,{content:s,ragSources:o||function(e){if(!e)return[];let t=e.find(e=>"rag-sources"===e.name);if(!t||!t.url.startsWith("data:application/json;base64,"))return[];try{let e=t.url.split(",")[1],s=Buffer.from(e,"base64").toString("utf-8");return JSON.parse(s)}catch(e){return console.error("Error parsing RAG sources:",e),[]}}(i)})]})]}),a&&(0,n.jsx)("div",{className:"flex flex-col gap-4",children:a.map(e=>{let{toolName:t,toolCallId:s,state:a}=e;if("result"!==a)return(0,n.jsx)("div",{className:"skeleton",children:"getWeather"===t?(0,n.jsx)(j,{}):null},s);{let{result:a}=e;return(0,n.jsx)("div",{children:"getWeather"===t?(0,n.jsx)(j,{weatherAtLocation:a}):(0,n.jsx)("div",{children:JSON.stringify(a,null,2)})},s)}})}),i&&(0,n.jsx)("div",{className:"flex flex-row gap-2",children:i.map(e=>(0,n.jsx)(m,{attachment:e},e.url))})]})]});var A=s(70968);let I=function(){let[e,t]=(0,i.useState)({width:void 0,height:void 0});return(0,i.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e},P=i.forwardRef(({className:e,...t},s)=>(0,n.jsx)("textarea",{className:(0,T.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));P.displayName="Textarea";let E=[{title:"Analyze my research papers",label:"Please upload documents first",action:"I'd like to analyze my research papers."},{title:"Search my documents",label:"Please upload documents first",action:"I want to search through my documents for specific information. Could you help me upload some documents first?"}];function $({input:e,setInput:t,isLoading:s,stop:a,attachments:d,setAttachments:c,messages:u,append:x,handleSubmit:p,updateIndexingStatus:f}){let h=(0,i.useRef)(null),{width:g}=I();(0,i.useEffect)(()=>{h.current&&b()},[]);let b=()=>{h.current&&(h.current.style.height="auto",h.current.style.height=`${h.current.scrollHeight+0}px`)},j=(0,i.useRef)(null),[v,T]=(0,i.useState)([]),y=(0,i.useCallback)(()=>{p(void 0,{experimental_attachments:d}),c([]),g&&g>768&&h.current?.focus()},[d,p,c,g]),w=["image/png","image/jpeg","image/gif","application/pdf","text/plain","text/markdown","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],N=e=>e.split(".").pop()?.toLowerCase()||"",z=e=>{if(e.type&&w.includes(e.type))return!0;if(!e.type){let t={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",pdf:"application/pdf",txt:"text/plain",md:"text/markdown",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}[N(e.name)];return!!t&&w.includes(t)}return!1},S=async e=>{if(!z(e)){A.A.error("Invalid file type. Please upload images (PNG, JPEG, GIF), PDFs, text files, or Office documents.");return}if(e.size>10485760){A.A.error("File too large. Please upload files smaller than 10MB.");return}let t=["text/plain","text/markdown","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(e.type),s=new FormData;s.append("file",e);try{let n=await fetch(t?"/api/documents/upload":"/api/files/upload",{method:"POST",body:s});if(n.ok){let s=await n.json();if(t){A.A.success(`Document "${e.name}" uploaded and indexed successfully!`);let t=s.indexing?.chunks;return f({status:"completed",filename:e.name,chunks:"number"!=typeof t||isNaN(t)?0:t}),{url:`document:${s.document.id}`,name:e.name,contentType:e.type}}{let{url:e,pathname:t,contentType:n}=s;return{url:e,name:t,contentType:n}}}{let{error:e}=await n.json();A.A.error(e)}}catch(e){A.A.error("Failed to upload file, please try again!")}},C=(0,i.useCallback)(async e=>{let t=Array.from(e.target.files||[]);T(t.map(e=>e.name));try{let e=t.map(e=>S(e)),s=(await Promise.all(e)).filter(e=>void 0!==e);c(e=>[...e,...s])}catch(e){console.error("Error uploading files!",e)}finally{T([])}},[c]);return(0,n.jsxs)("div",{className:"relative w-full flex flex-col gap-4",children:[0===u.length&&0===d.length&&0===v.length&&(0,n.jsx)("div",{className:"grid sm:grid-cols-2 gap-4 w-full md:px-0 mx-auto md:max-w-[500px]",children:E.map((e,t)=>(0,n.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{delay:.05*t},className:t>1?"hidden sm:block":"block",children:(0,n.jsxs)("button",{onClick:async()=>{x({role:"user",content:e.action})},className:"border-none bg-muted/50 w-full text-left border border-zinc-200 dark:border-zinc-800 text-zinc-800 dark:text-zinc-300 rounded-lg p-3 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors flex flex-col",children:[(0,n.jsx)("span",{className:"font-medium",children:e.title}),(0,n.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:e.label})]})},t))}),(0,n.jsx)("input",{type:"file",className:"fixed -top-4 -left-4 size-0.5 opacity-0 pointer-events-none",ref:j,multiple:!0,onChange:C,tabIndex:-1}),(d.length>0||v.length>0)&&(0,n.jsxs)("div",{className:"flex flex-row gap-2 overflow-x-scroll",children:[d.map(e=>(0,n.jsx)(m,{attachment:e},e.url)),v.map(e=>(0,n.jsx)(m,{attachment:{url:"",name:e,contentType:""},isUploading:!0},e))]}),(0,n.jsx)(P,{ref:h,placeholder:"Send a message...",value:e,onChange:e=>{t(e.target.value),b()},className:"min-h-[24px] overflow-hidden resize-none rounded-lg text-base bg-muted border-none",rows:3,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s?A.A.error("Please wait for the model to finish its response!"):y())}}),s?(0,n.jsx)(k.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-2 m-0.5 text-white",onClick:e=>{e.preventDefault(),a()},children:(0,n.jsx)(l.wN,{size:14})}):(0,n.jsx)(k.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-2 m-0.5 text-white",onClick:e=>{e.preventDefault(),y()},disabled:0===e.length||v.length>0,children:(0,n.jsx)(l.Hf,{size:14})}),(0,n.jsx)(k.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-20 m-0.5 dark:border-zinc-700",onClick:e=>{e.preventDefault(),j.current?.click()},variant:"outline",disabled:s,title:"Upload files",children:(0,n.jsx)(l.og,{size:14})}),(0,n.jsx)(o.default,{href:"/demonstration",children:(0,n.jsx)(k.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-10 m-0.5 dark:border-zinc-700",variant:"outline",disabled:s,title:"See how RAG works",children:(0,n.jsx)("span",{className:"text-xs font-medium",children:"i"})})})]})}let O=()=>(0,n.jsx)(r.E.div,{className:"max-w-[500px] mt-20 mx-4 md:mx-0",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{delay:.5},children:(0,n.jsxs)("div",{className:"border-none bg-muted/50 rounded-2xl p-6 flex flex-col gap-4 text-zinc-500 text-sm dark:text-zinc-400 dark:border-zinc-700",children:[(0,n.jsxs)("p",{className:"flex flex-row justify-center gap-4 items-center text-zinc-900 dark:text-zinc-50",children:[(0,n.jsx)(l.Kn,{}),(0,n.jsx)("span",{children:"+"}),(0,n.jsx)(l.P$,{})]}),(0,n.jsxs)("p",{children:["This is an experimental RAG (Retrieval-Augmented Generation) chatbot that combines document intelligence with general AI assistance. Upload your documents (PDF, DOCX, MD, TXT) and chat with them using semantic search, powered by"," ",(0,n.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"Pinecone"})," ","vector storage,"," ",(0,n.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"HuggingFace"})," ","embeddings, and"," ",(0,n.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"Google Gemini"}),"."]}),(0,n.jsxs)("p",{children:["Start by uploading documents using the"," ",(0,n.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"\uD83D\uDCC1 Document Manager"})," ","in the navbar, then ask questions about your content. The AI can also help with general tasks and provide weather information."]})]})},"overview");var G=s(26166);let M={parsing:"Parsing document...",chunking:"Creating chunks...",embedding:"Generating embeddings...",indexing:"Indexing to database...",completed:"Indexing complete"},R={parsing:l.c0,chunking:l.c0,embedding:l.c0,indexing:l.c0,completed:l.fU};function F({status:e,onDismiss:t}){let[s,a]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(e){if(a(["parsing","chunking","embedding","indexing"].includes(e.status)||"completed"===e.status),d(!1),"completed"===e.status){let e=setTimeout(()=>{d(!0),setTimeout(()=>{a(!1),t?.()},300)},5e3);return()=>clearTimeout(e)}}else a(!1)},[e,t]),!e||!s)return null;let c=R[e.status],u="completed"!==e.status;return(0,n.jsx)(G.M,{children:(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:o?0:1,y:o?-10:0,scale:o?.95:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"flex items-center gap-2 px-3 py-2 bg-muted/50 border rounded-lg text-sm mb-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[u?(0,n.jsx)("div",{className:"animate-spin text-blue-600",children:(0,n.jsx)(c,{size:14})}):(0,n.jsx)("div",{className:"text-green-600",children:(0,n.jsx)(c,{size:14})}),(0,n.jsx)("div",{className:"text-muted-foreground",children:(0,n.jsx)(l.aA,{size:14})}),(0,n.jsx)("span",{className:"font-medium",children:((e,t=20)=>{if(e.length<=t)return e;let s=e.split(".").pop(),n=e.substring(0,e.lastIndexOf(".")).substring(0,t-s.length-4)+"...";return`${n}.${s}`})(e.filename)}),(0,n.jsx)("span",{className:"text-muted-foreground",children:M[e.status]}),"completed"===e.status&&e.chunks&&(0,n.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",e.chunks," chunks)"]})]}),"completed"===e.status&&(0,n.jsx)(k.z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",onClick:()=>{d(!0),setTimeout(()=>{a(!1),t?.()},300)},children:"\xd7"})]})})}function L({id:e,initialMessages:t}){let{messages:s,handleSubmit:r,input:l,setInput:o,append:d,isLoading:c,stop:u}=(0,a.RJ)({id:e,body:{id:e},initialMessages:t,maxSteps:10,onFinish:()=>{window.history.replaceState({},"",`/chat/${e}`)}}),[m,x]=function(){let e=(0,i.useRef)(null),t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let s=e.current,n=t.current;if(s&&n){let e=new MutationObserver(()=>{n.scrollIntoView({behavior:"instant",block:"end"})});return e.observe(s,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>e.disconnect()}},[]),[e,t]}(),[p,f]=(0,i.useState)([]),{status:h,updateStatus:g,clearStatus:b}=function(){let[e,t]=(0,i.useState)(null);return{status:e,updateStatus:e=>{t(e)},clearStatus:()=>{t(null)}}}();return(0,n.jsx)("div",{className:"flex flex-row justify-center pb-4 md:pb-8 h-dvh bg-background",children:(0,n.jsxs)("div",{className:"flex flex-col justify-between items-center gap-4",children:[(0,n.jsxs)("div",{ref:m,className:"flex flex-col gap-4 h-full w-dvw items-center overflow-y-scroll",children:[0===s.length&&(0,n.jsx)(O,{}),s.map(t=>(0,n.jsx)(_,{chatId:e,role:t.role,content:t.content,attachments:t.experimental_attachments,toolInvocations:t.toolInvocations,ragSources:t.ragSources},t.id)),(0,n.jsx)("div",{ref:x,className:"shrink-0 min-w-[24px] min-h-[24px]"})]}),(0,n.jsxs)("div",{className:"w-full md:max-w-[500px] max-w-[calc(100dvw-32px)] px-4 md:px-0",children:[(0,n.jsx)(F,{status:h,onDismiss:b}),(0,n.jsx)("form",{className:"flex flex-row gap-2 relative items-end w-full",children:(0,n.jsx)($,{input:l,setInput:o,handleSubmit:r,isLoading:c,stop:u,attachments:p,setAttachments:f,messages:s,append:d,updateIndexingStatus:g})})]})]})})}},68587:(e,t,s)=>{"use strict";s.a(e,async(e,n)=>{try{s.d(t,{e:()=>e});var a=s(3571);let e=(await (0,a.createProxy)(String.raw`/Users/duy/Documents/build/rag/components/custom/chat.tsx`)).Chat;n()}catch(e){n(e)}},1)},57481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(78099);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},9178:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(78099);let a=e=>[{type:"image/png",width:2400,height:1256,url:(0,n.fillMetadataSegment)("/(chat)",e.params,"opengraph-image.png")+"?8190afebf6a79ae8"}]},11189:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(78099);let a=e=>[{type:"image/png",width:2400,height:1256,url:(0,n.fillMetadataSegment)("/(chat)",e.params,"twitter-image.png")+"?8190afebf6a79ae8"}]}};