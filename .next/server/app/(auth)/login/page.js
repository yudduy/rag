(()=>{var e={};e.id=665,e.ids=[665],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32307:e=>{"use strict";e.exports=require("next/dist/server/app-render/prerender-async-storage.external.js")},6113:e=>{"use strict";e.exports=require("crypto")},57147:e=>{"use strict";e.exports=require("fs")},41808:e=>{"use strict";e.exports=require("net")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},52245:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=a(40568),s=a(64006),i=a(90213),n=a.n(i),l=a(78787),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=["",{children:["(auth)",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3908)),"/Users/duy/Documents/build/rag/app/(auth)/login/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(a.t.bind(a,28706,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,3701)),"/Users/duy/Documents/build/rag/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,28706,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/duy/Documents/build/rag/app/(auth)/login/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(auth)/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},19120:(e,t,a)=>{let r={af0ed5d6a42a8cb127adf89b01a60f17535f05bb:()=>Promise.resolve().then(a.bind(a,16561)).then(e=>e.$$ACTION_0),b587edaa61e984276ca60f8d9ca9de4ea6cccbc9:()=>Promise.resolve().then(a.bind(a,16561)).then(e=>e.login),f75ac3cb2feb73926a47277e1249c6044f85687c:()=>Promise.resolve().then(a.bind(a,16561)).then(e=>e.$$ACTION_1)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={af0ed5d6a42a8cb127adf89b01a60f17535f05bb:s.bind(null,"af0ed5d6a42a8cb127adf89b01a60f17535f05bb"),b587edaa61e984276ca60f8d9ca9de4ea6cccbc9:s.bind(null,"b587edaa61e984276ca60f8d9ca9de4ea6cccbc9"),f75ac3cb2feb73926a47277e1249c6044f85687c:s.bind(null,"f75ac3cb2feb73926a47277e1249c6044f85687c")}},86349:(e,t,a)=>{Promise.resolve().then(a.bind(a,78431))},3344:(e,t,a)=>{"use strict";a.d(t,{x:()=>i,z:()=>s}),a(65888);var r=a(8412),s=(0,r.$)("e55076a0838d2fdeb16914021c9f1a95d37ee6d8"),i=(0,r.$)("b587edaa61e984276ca60f8d9ca9de4ea6cccbc9")},78431:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(20149),s=a(85723),i=a(4619),n=a(63606),l=a(70968),d=a(76348),o=a(54933),c=a(3344);function u(){let e=(0,i.useRouter)(),[t,a]=(0,n.useState)(""),[u,m]=(0,n.useActionState)(c.x,{status:"idle"});return(0,n.useEffect)(()=>{"failed"===u.status?l.A.error("Invalid credentials!"):"invalid_data"===u.status?l.A.error("Failed validating your submission!"):"success"===u.status&&e.refresh()},[u.status,e]),(0,r.jsx)("div",{className:"flex h-screen w-screen items-center justify-center bg-background",children:(0,r.jsxs)("div",{className:"w-full max-w-md overflow-hidden rounded-2xl flex flex-col gap-12",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 px-4 text-center sm:px-16",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold dark:text-zinc-50",children:"Sign In"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Use your email and password to sign in"})]}),(0,r.jsxs)(d.B,{action:e=>{a(e.get("email")),m(e)},defaultEmail:t,children:[(0,r.jsx)(o.M,{children:"Sign in"}),(0,r.jsxs)("p",{className:"text-center text-sm text-gray-600 mt-4 dark:text-zinc-400",children:["Don't have an account? ",(0,r.jsx)(s.default,{href:"/register",className:"font-semibold text-gray-800 hover:underline dark:text-zinc-200",children:"Sign up"})," for free."]})]})]})})}},76348:(e,t,a)=>{"use strict";a.d(t,{B:()=>c});var r=a(20149),s=a(63606),i=a(24219);let n=s.forwardRef(({className:e,type:t,...a},s)=>(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));n.displayName="Input";var l=a(18486);let d=(0,a(9285).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.f,{ref:a,className:(0,i.cn)(d(),e),...t}));function c({action:e,children:t,defaultEmail:a=""}){return(0,r.jsxs)("form",{action:e,className:"flex flex-col gap-4 px-4 sm:px-16",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(o,{htmlFor:"email",className:"text-zinc-600 font-normal dark:text-zinc-400",children:"Email Address"}),(0,r.jsx)(n,{id:"email",name:"email",className:"bg-muted text-md md:text-sm border-none",type:"email",placeholder:"user@acme.com",autoComplete:"email",required:!0,defaultValue:a}),(0,r.jsx)(o,{htmlFor:"password",className:"text-zinc-600 font-normal dark:text-zinc-400",children:"Password"}),(0,r.jsx)(n,{id:"password",name:"password",className:"bg-muted text-md md:text-sm border-none",type:"password",required:!0})]}),t]})}o.displayName=l.f.displayName},54933:(e,t,a)=>{"use strict";a.d(t,{M:()=>l});var r=a(20149),s=a(30028),i=a(73286),n=a(56598);function l({children:e}){let{pending:t}=(0,s.useFormStatus)();return(0,r.jsxs)(n.z,{type:t?"button":"submit","aria-disabled":t,className:"relative text-white",children:[e,t&&(0,r.jsx)("span",{className:"animate-spin absolute right-4",children:(0,r.jsx)(i.c0,{})}),(0,r.jsx)("span",{"aria-live":"polite",className:"sr-only",role:"status",children:t?"Loading":"Submit form"})]})}},16561:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$ACTION_0:()=>U,$$ACTION_1:()=>M,login:()=>E,register:()=>C});var r=a(81674);a(47770);var s=a(15278),i=a(11937),n=a(33816),l=a(88581),d=a(89519),o=a(90075),c=a(76399),u=a(67462),m=a(49720),f=a(249),p=a(39873),x=a(10020),b=a(98727),h=a(34223),g=a(14649),y=a(78824);let v=(0,c.af)("User",{id:(0,u.Vj)("id").primaryKey().notNull().defaultRandom(),email:(0,m.L7)("email",{length:64}).notNull(),password:(0,m.L7)("password",{length:128})},e=>({uniqueEmail:(0,f.Tw)().on(e.email)}));(0,c.af)("Chat",{id:(0,u.Vj)("id").primaryKey().notNull().defaultRandom(),createdAt:(0,p.AB)("createdAt").notNull(),messages:(0,x.AV)("messages").notNull(),userId:(0,u.Vj)("userId").notNull().references(()=>v.id)}),(0,c.af)("Reservation",{id:(0,u.Vj)("id").primaryKey().notNull().defaultRandom(),createdAt:(0,p.AB)("createdAt").notNull(),details:(0,x.AV)("details").notNull(),hasCompletedPayment:(0,b.O7)("hasCompletedPayment").notNull().default(!1),userId:(0,u.Vj)("userId").notNull().references(()=>v.id)}),(0,c.af)("Document",{id:(0,u.Vj)("id").primaryKey().notNull().defaultRandom(),filename:(0,m.L7)("filename",{length:255}).notNull(),originalName:(0,m.L7)("originalName",{length:255}).notNull(),fileType:(0,m.L7)("fileType",{length:50}).notNull(),fileSize:(0,h._L)("fileSize").notNull(),content:(0,g.fL)("content").notNull(),status:(0,m.L7)("status",{length:20}).notNull().default("indexed"),chunkCount:(0,h._L)("chunkCount").notNull().default(0),createdAt:(0,p.AB)("createdAt").notNull().default((0,y.i6)`CURRENT_TIMESTAMP`),updatedAt:(0,p.AB)("updatedAt").notNull().default((0,y.i6)`CURRENT_TIMESTAMP`),userId:(0,u.Vj)("userId").notNull().references(()=>v.id,{onDelete:"cascade"})});let w=process.env.POSTGRES_URL?(()=>{let e=new URL(process.env.POSTGRES_URL);return e.searchParams.set("sslmode","require"),e.toString()})():"postgres://dummy:dummy@localhost:5432/dummy",N=(0,o.Z)(w,{max:1,transform:process.env.POSTGRES_URL?o.Z.camel:void 0}),j=(0,d.t)(N);async function _(e){try{return await j.select().from(v).where((0,l.eq)(v.email,e))}catch(e){throw console.error("Failed to get user from database"),e}}async function P(e,t){let a=(0,n.W0)(10),r=(0,n.St)(t,a);try{return await j.insert(v).values({email:e,password:r})}catch(e){throw console.error("Failed to create user in database"),e}}var A=a(18245),q=a(64911);let{handlers:{GET:R,POST:S},auth:k,signIn:T,signOut:I}=(0,A.ZP)({pages:{signIn:"/login",newUser:"/"},providers:[],callbacks:{authorized({auth:e,request:{nextUrl:t}}){let a=!!e?.user,r=t.pathname.startsWith("/"),s=t.pathname.startsWith("/register"),i=t.pathname.startsWith("/login");return a&&(i||s)?Response.redirect(new URL("/",t)):!!s||!!i||(r?!!a:!a||Response.redirect(new URL("/",t)))}},providers:[(0,q.Z)({credentials:{},async authorize({email:e,password:t}){if(!e||!t)return null;let a=await _(e);if(0===a.length)return null;let r=a[0];return r.password&&await (0,n.qu)(t,r.password)?r:null}})],callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id),e)}});var L=a(47937);let z=s.Ry({email:s.Z_().email(),password:s.Z_().min(6)}),E=(0,r.j)("af0ed5d6a42a8cb127adf89b01a60f17535f05bb",U);async function U(e,t){try{let e=z.parse({email:t.get("email"),password:t.get("password")});return await T("credentials",{email:e.email,password:e.password,redirect:!1}),{status:"success"}}catch(e){if(e instanceof i.jm)return{status:"invalid_data"};return{status:"failed"}}}let C=(0,r.j)("f75ac3cb2feb73926a47277e1249c6044f85687c",M);async function M(e,t){try{let e=z.parse({email:t.get("email"),password:t.get("password")}),[a]=await _(e.email);if(a)return{status:"user_exists"};return await P(e.email,e.password),await T("credentials",{email:e.email,password:e.password,redirect:!1}),{status:"success"}}catch(e){if(e instanceof i.jm)return{status:"invalid_data"};return{status:"failed"}}}(0,L.h)([E,C]),(0,r.j)("b587edaa61e984276ca60f8d9ca9de4ea6cccbc9",E),(0,r.j)("e55076a0838d2fdeb16914021c9f1a95d37ee6d8",C)},3908:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>e});var s=a(3571);let e=(await (0,s.createProxy)(String.raw`/Users/duy/Documents/build/rag/app/(auth)/login/page.tsx`)).default;r()}catch(e){r(e)}},1)},57481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(78099);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[615,503,80,6,237,99,281,514],()=>a(52245));module.exports=r})();