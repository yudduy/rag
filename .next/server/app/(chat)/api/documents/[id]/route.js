"use strict";(()=>{var e={};e.id=906,e.ids=[906],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32307:e=>{e.exports=require("next/dist/server/app-render/prerender-async-storage.external.js")},6113:e=>{e.exports=require("crypto")},57147:e=>{e.exports=require("fs")},41808:e=>{e.exports=require("net")},72254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},84492:e=>{e.exports=require("node:stream")},47261:e=>{e.exports=require("node:util")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},4074:e=>{e.exports=require("perf_hooks")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},64394:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>g,requestAsyncStorage:()=>m,routeModule:()=>x,serverHooks:()=>q,staticGenerationAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{DELETE:()=>p,GET:()=>l});var o=t(38728),n=t(64006),i=t(64615),u=t(49588),a=t(89228),d=t(21080),c=t(72724);async function p(e,{params:r}){try{let e=await (0,a.I8)();if(!e?.user?.id)return u.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.id,s=await (0,d.cQ)({id:t});if(!s)return u.NextResponse.json({error:"Document not found"},{status:404});if(s.userId!==e.user.id)return u.NextResponse.json({error:"Forbidden"},{status:403});try{let r=(0,c.vd)(),t=await r.deleteDocument(s.filename,e.user.id);console.log(`RAG deletion result for ${s.filename}:`,t)}catch(e){console.error("RAG deletion error:",e)}return await (0,d.g6)({id:t}),u.NextResponse.json({success:!0,message:"Document deleted successfully"})}catch(e){return console.error("Document deletion error:",e),u.NextResponse.json({error:"Failed to delete document"},{status:500})}}async function l(e,{params:r}){try{let e=await (0,a.I8)();if(!e?.user?.id)return u.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.id,s=await (0,d.cQ)({id:t});if(!s)return u.NextResponse.json({error:"Document not found"},{status:404});if(s.userId!==e.user.id)return u.NextResponse.json({error:"Forbidden"},{status:403});return u.NextResponse.json({id:s.id,filename:s.filename,originalName:s.originalName,fileType:s.fileType,fileSize:s.fileSize,chunkCount:s.chunkCount,status:s.status,createdAt:s.createdAt,updatedAt:s.updatedAt})}catch(e){return console.error("Error fetching document:",e),u.NextResponse.json({error:"Failed to fetch document"},{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/(chat)/api/documents/[id]/route",pathname:"/api/documents/[id]",filename:"route",bundlePath:"app/(chat)/api/documents/[id]/route"},resolvedPagePath:"/Users/duy/Documents/build/rag/app/(chat)/api/documents/[id]/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,prerenderAsyncStorage:h,serverHooks:q}=x;function g(){return(0,i.patchFetch)({staticGenerationAsyncStorage:f,requestAsyncStorage:m,prerenderAsyncStorage:h})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[615,503,80,400,463],()=>t(64394));module.exports=s})();