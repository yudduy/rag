(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{7604:(e,t,s)=>{Promise.resolve().then(s.bind(s,5213))},5213:(e,t,s)=>{"use strict";s.d(t,{Chat:()=>G});var a=s(7437),i=s(4566),l=s(2265),r=s(2212),n=s(6249),d=s(3391),c=s(9366),o=s(3482);let m=(0,l.memo)(e=>{let{children:t}=e;return(0,a.jsx)(c.UG,{remarkPlugins:[o.Z],components:{code:e=>{let{node:t,inline:s,className:i,children:l,...r}=e,n=/language-(\w+)/.exec(i||"");return!s&&n?(0,a.jsx)("pre",{...r,className:"".concat(i," text-sm w-[80dvw] md:max-w-[500px] overflow-x-scroll bg-zinc-100 p-3 rounded-lg mt-2 dark:bg-zinc-800"),children:(0,a.jsx)("code",{className:n[1],children:l})}):(0,a.jsx)("code",{className:"".concat(i," text-sm bg-zinc-100 dark:bg-zinc-800 py-0.5 px-1 rounded-md"),...r,children:l})},ol:e=>{let{node:t,children:s,...i}=e;return(0,a.jsx)("ol",{className:"list-decimal list-outside ml-4",...i,children:s})},li:e=>{let{node:t,children:s,...i}=e;return(0,a.jsx)("li",{className:"py-1",...i,children:s})},ul:e=>{let{node:t,children:s,...i}=e;return(0,a.jsx)("ul",{className:"list-decimal list-outside ml-4",...i,children:s})},strong:e=>{let{node:t,children:s,...i}=e;return(0,a.jsx)("span",{className:"font-semibold",...i,children:s})},a:e=>{let{node:t,children:s,...i}=e;return(0,a.jsx)(d.default,{className:"text-blue-500 hover:underline",target:"_blank",rel:"noreferrer",...i,children:s})}},children:t})},(e,t)=>e.children===t.children),x=e=>{let{attachment:t,isUploading:s=!1}=e,{name:i,url:l,contentType:r}=t;return(0,a.jsxs)("div",{className:"flex flex-col gap-2 max-w-16",children:[(0,a.jsxs)("div",{className:"h-20 w-16 bg-muted rounded-md relative flex flex-col items-center justify-center",children:[r&&r.startsWith("image")?(0,a.jsx)("img",{src:l,alt:null!=i?i:"An image attachment",className:"rounded-md size-full object-cover"},l):(0,a.jsx)("div",{className:""}),s&&(0,a.jsx)("div",{className:"animate-spin absolute text-zinc-500",children:(0,a.jsx)(n.c0,{})})]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500 max-w-16 truncate",children:i})]})};var u=s(1676),f=s.n(u),p=s(5601),h=s(8585);let v={latitude:37.763283,longitude:-122.41286,generationtime_ms:.027894973754882813,utc_offset_seconds:0,timezone:"GMT",timezone_abbreviation:"GMT",elevation:18,current_units:{time:"iso8601",interval:"seconds",temperature_2m:"\xb0C"},current:{time:"2024-10-07T19:30",interval:900,temperature_2m:29.3},hourly_units:{time:"iso8601",temperature_2m:"\xb0C"},hourly:{time:["2024-10-07T00:00","2024-10-07T01:00","2024-10-07T02:00","2024-10-07T03:00","2024-10-07T04:00","2024-10-07T05:00","2024-10-07T06:00","2024-10-07T07:00","2024-10-07T08:00","2024-10-07T09:00","2024-10-07T10:00","2024-10-07T11:00","2024-10-07T12:00","2024-10-07T13:00","2024-10-07T14:00","2024-10-07T15:00","2024-10-07T16:00","2024-10-07T17:00","2024-10-07T18:00","2024-10-07T19:00","2024-10-07T20:00","2024-10-07T21:00","2024-10-07T22:00","2024-10-07T23:00","2024-10-08T00:00","2024-10-08T01:00","2024-10-08T02:00","2024-10-08T03:00","2024-10-08T04:00","2024-10-08T05:00","2024-10-08T06:00","2024-10-08T07:00","2024-10-08T08:00","2024-10-08T09:00","2024-10-08T10:00","2024-10-08T11:00","2024-10-08T12:00","2024-10-08T13:00","2024-10-08T14:00","2024-10-08T15:00","2024-10-08T16:00","2024-10-08T17:00","2024-10-08T18:00","2024-10-08T19:00","2024-10-08T20:00","2024-10-08T21:00","2024-10-08T22:00","2024-10-08T23:00","2024-10-09T00:00","2024-10-09T01:00","2024-10-09T02:00","2024-10-09T03:00","2024-10-09T04:00","2024-10-09T05:00","2024-10-09T06:00","2024-10-09T07:00","2024-10-09T08:00","2024-10-09T09:00","2024-10-09T10:00","2024-10-09T11:00","2024-10-09T12:00","2024-10-09T13:00","2024-10-09T14:00","2024-10-09T15:00","2024-10-09T16:00","2024-10-09T17:00","2024-10-09T18:00","2024-10-09T19:00","2024-10-09T20:00","2024-10-09T21:00","2024-10-09T22:00","2024-10-09T23:00","2024-10-10T00:00","2024-10-10T01:00","2024-10-10T02:00","2024-10-10T03:00","2024-10-10T04:00","2024-10-10T05:00","2024-10-10T06:00","2024-10-10T07:00","2024-10-10T08:00","2024-10-10T09:00","2024-10-10T10:00","2024-10-10T11:00","2024-10-10T12:00","2024-10-10T13:00","2024-10-10T14:00","2024-10-10T15:00","2024-10-10T16:00","2024-10-10T17:00","2024-10-10T18:00","2024-10-10T19:00","2024-10-10T20:00","2024-10-10T21:00","2024-10-10T22:00","2024-10-10T23:00","2024-10-11T00:00","2024-10-11T01:00","2024-10-11T02:00","2024-10-11T03:00"],temperature_2m:[36.6,32.8,29.5,28.6,29.2,28.2,27.5,26.6,26.5,26,25,23.5,23.9,24.2,22.9,21,24,28.1,31.4,33.9,32.1,28.9,26.9,25.2,23,21.1,19.6,18.6,17.7,16.8,16.2,15.5,14.9,14.4,14.2,13.7,13.3,12.9,12.5,13.5,15.8,17.7,19.6,21,21.9,22.3,22,20.7,18.9,17.9,17.3,17,16.7,16.2,15.6,15.2,15,15,15.1,14.8,14.8,14.9,14.7,14.8,15.3,16.2,17.9,19.6,20.5,21.6,21,20.7,19.3,18.7,18.4,17.9,17.3,17,17,16.8,16.4,16.2,16,15.8,15.7,15.4,15.4,16.1,16.7,17,18.6,19,19.5,19.4,18.5,17.9,17.5,16.7,16.3,16.1]},daily_units:{time:"iso8601",sunrise:"iso8601",sunset:"iso8601"},daily:{time:["2024-10-07","2024-10-08","2024-10-09","2024-10-10","2024-10-11"],sunrise:["2024-10-07T07:15","2024-10-08T07:16","2024-10-09T07:17","2024-10-10T07:18","2024-10-11T07:19"],sunset:["2024-10-07T19:00","2024-10-08T18:58","2024-10-09T18:57","2024-10-10T18:55","2024-10-11T18:54"]}};function g(e){return Math.ceil(e)}function b(e){let{weatherAtLocation:t=v}=e,s=Math.max(...t.hourly.temperature_2m.slice(0,24)),i=Math.min(...t.hourly.temperature_2m.slice(0,24)),r=(0,p._)(new Date(t.current.time),{start:new Date(t.daily.sunrise[0]),end:new Date(t.daily.sunset[0])}),[n,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=()=>{d(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let c=n?5:6,o=t.hourly.time.findIndex(e=>new Date(e)>=new Date(t.current.time)),m=t.hourly.time.slice(o,o+c),x=t.hourly.temperature_2m.slice(o,o+c);return(0,a.jsxs)("div",{className:f()("flex flex-col gap-4 rounded-2xl p-4 skeleton-bg",{"bg-blue-400":r},{"bg-indigo-900":!r}),children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,a.jsx)("div",{className:f()("size-10 rounded-full skeleton-div",{"bg-yellow-300":r},{"bg-indigo-100":!r})}),(0,a.jsxs)("div",{className:"text-4xl font-medium text-blue-50",children:[g(t.current.temperature_2m),t.current_units.temperature_2m]})]}),(0,a.jsx)("div",{className:"text-blue-50",children:"H:".concat(g(s),"\xb0 L:").concat(g(i),"\xb0")})]}),(0,a.jsx)("div",{className:"flex flex-row justify-between",children:m.map((e,s)=>(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("div",{className:"text-blue-100 text-xs",children:(0,h.WU)(new Date(e),"ha")}),(0,a.jsx)("div",{className:f()("size-6 rounded-full skeleton-div",{"bg-yellow-300":r},{"bg-indigo-200":!r})}),(0,a.jsxs)("div",{className:"text-blue-50 text-sm",children:[g(x[s]),t.hourly_units.temperature_2m]})]},e))})]})}var j=s(2806),N=s(3082),w=s(7352),y=s(3989),T=s(5354);function D(e){let{intent:t={reservationId:"sample-uuid"}}=e,{data:s,mutate:i}=(0,w.ZP)("/api/reservation?id=".concat(t.reservationId),y._i),[r,d]=(0,l.useState)(""),c=async e=>{try{let s=await fetch("/api/reservation?id=".concat(t.reservationId),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({magicWord:e})});if(!s.ok){let e=await s.text();throw Error(e||s.statusText)}let a=await s.json();i(a)}catch(e){e instanceof Error?N.A.error(e.message):N.A.error("An unknown error occurred")}};return(null==s?void 0:s.hasCompletedPayment)?(0,a.jsxs)("div",{className:"bg-emerald-500 p-4 rounded-lg gap-4 flex flex-row justify-between items-center",children:[(0,a.jsx)("div",{className:"dark:text-emerald-950 text-emerald-50 font-medium",children:"Payment Verified"}),(0,a.jsx)("div",{className:"dark:text-emerald-950 text-emerald-50",children:(0,a.jsx)(n.fU,{size:20})})]}):(0,j.X)(new Date,new Date(null==s?void 0:s.createdAt))>150?(0,a.jsxs)("div",{className:"bg-red-500 p-4 rounded-lg gap-4 flex flex-row justify-between items-center",children:[(0,a.jsx)("div",{className:"text-background",children:"Payment Gateway Timed Out"}),(0,a.jsx)("div",{className:"text-background",children:(0,a.jsx)(n.sz,{size:20})})]}):(0,a.jsxs)("div",{className:"bg-muted p-4 rounded-lg flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text font-medium",children:"Use your saved information for this transaction"}),(0,a.jsx)("div",{className:"text-muted-foreground text-sm sm:text-base",children:"Enter the magic word to authorize payment. Hint: It rhymes with bercel."}),(0,a.jsx)(T.I,{type:"text",placeholder:"Enter magic word...",className:"dark:bg-zinc-700 text-base border-none mt-2",onChange:e=>d(e.currentTarget.value),onKeyDown:async e=>{"Enter"===e.key&&(await c(r),d(""))}})]})}var A=s(1622);let S={reservationId:"RES123456",flightNumber:"DL1",seat:"1C",departure:{cityName:"London",airportCode:"LHR",airportName:"Heathrow Airport",timestamp:"2023-11-01T09:00:00Z",terminal:"5",gate:"A10"},arrival:{cityName:"New York City",airportCode:"JFK",airportName:"John F. Kennedy International Airport",timestamp:"2023-11-01T12:00:00Z",terminal:"4",gate:"B22"},passengerName:"John Doe"};function k(e){let{boardingPass:t=S}=e;return(0,a.jsxs)("div",{className:"bg-yellow-200 p-4 rounded-lg flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center relative",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("div",{className:"text-yellow-800 text-sm sm:text-base",children:t.departure.cityName}),(0,a.jsx)("div",{className:"text-yellow-800 text-2xl sm:text-3xl font-semibold",children:t.departure.airportCode})]}),(0,a.jsx)("div",{className:"absolute w-full flex flex-row justify-center",children:(0,a.jsx)("div",{className:"text-amber-800",children:(0,a.jsx)(A.Z,{})})}),(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("div",{className:"text-yellow-800 text-sm sm:text-base",children:t.arrival.cityName}),(0,a.jsx)("div",{className:"text-yellow-800 text-2xl sm:text-3xl font-semibold text-right",children:t.arrival.airportCode})]})]}),(0,a.jsx)("div",{className:"h-px grow bg-yellow-600/20"}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("div",{className:"text-yellow-900 text-sm font-medium sm:text-base",children:"Passenger"}),(0,a.jsx)("div",{className:"text-lg text-yellow-700",children:t.passengerName})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("div",{className:"text-yellow-900 text-sm font-medium sm:text-base",children:"Gate"}),(0,a.jsx)("div",{className:"text-lg text-yellow-700",children:t.departure.gate})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("div",{className:"text-yellow-900 text-sm font-medium sm:text-base",children:"Boards"}),(0,a.jsx)("div",{className:"text-lg text-yellow-700",children:(0,h.WU)(new Date(t.departure.timestamp),"h:mma")})]})]})]})}let I={seats:["4C"],flightNumber:"EK413",departure:{cityName:"Sydney",airportCode:"SYD",timestamp:"2023-11-01T06:00:00",gate:"A12",terminal:"1"},arrival:{cityName:"Chennai",airportCode:"MAA",timestamp:"2023-11-01T18:45:00",gate:"B5",terminal:"3"},passengerName:"John Doe",totalPriceInUSD:1200};function z(e){let{reservation:t=I}=e;return(0,a.jsx)("div",{className:"rounded-lg bg-muted p-4",children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex flex-col justify-between gap-4",children:[(0,a.jsxs)("div",{className:"text font-medium",children:[(0,a.jsxs)("span",{className:"no-skeleton text-foreground/50",children:["Continue purchasing this reservation from"," "]}),t.departure.cityName," to ",t.arrival.cityName,(0,a.jsx)("span",{className:"no-skeleton text-foreground/50",children:" at "})," ",(0,a.jsxs)("span",{className:"no-skeleton text-emerald-600 font-medium",children:["$",t.totalPriceInUSD," USD",(0,a.jsx)("span",{className:"no-skeleton text-foreground/50 ",children:"?"})]})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"text font-medium sm:text-base text-sm",children:"Seats"}),(0,a.jsx)("div",{className:"text-muted-foreground sm:text-base text-sm",children:t.seats.join(", ")})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"text sm:text-base text-sm font-medium",children:"Flight Number"}),(0,a.jsx)("div",{className:"text sm:text-base text-sm text-muted-foreground",children:t.flightNumber})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"text font-medium sm:text-base text-sm",children:"Date"}),(0,a.jsx)("div",{className:"text text-muted-foreground sm:text-base text-sm",children:(0,h.WU)(new Date(t.arrival.timestamp),"dd LLL yyyy")})]})]})]})})})}var C=s(874);let U={flightNumber:"BA142",departure:{cityName:"London",airportCode:"LHR",airportName:"London Heathrow Airport",timestamp:"2024-10-08T18:30:00Z",terminal:"5",gate:"A10"},arrival:{cityName:"New York",airportCode:"JFK",airportName:"John F. Kennedy International Airport",timestamp:"2024-10-09T07:30:00Z",terminal:"7",gate:"B22"},totalDistanceInMiles:3450};function F(e){let{row:t=U.arrival,type:s="arrival"}=e;return(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,a.jsx)("div",{className:"bg-foreground text-background rounded-full size-fit",children:"arrival"===s?(0,a.jsx)("div",{className:"rotate-90",children:(0,a.jsx)(n.P7,{size:16})}):(0,a.jsx)(n.P7,{size:16})}),(0,a.jsx)("div",{className:"text-sm sm:text-base text-muted-foreground",children:t.airportCode}),(0,a.jsx)("div",{children:"\xb7"}),(0,a.jsx)("div",{className:"text-sm sm:text-base truncate max-w-32 sm:max-w-64 text-muted-foreground",children:t.airportName})]}),(0,a.jsx)("div",{className:"text-2xl sm:text-3xl font-medium",children:(0,h.WU)(new Date(t.timestamp),"h:mm a")})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 items-end justify-center mt-auto",children:[(0,a.jsx)("div",{className:"text-sm sm:text-sm bg-amber-400 rounded-md w-fit px-2 text-amber-900",children:t.gate}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Terminal ",t.terminal]})]})]})}function _(e){let{flightStatus:t=U}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2 bg-muted rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1 text-sm",children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:t.flightNumber}),(0,a.jsxs)("div",{className:"text-lg font-medium",children:[t.departure.cityName," to ",t.arrival.cityName]})]}),(0,a.jsx)("div",{className:"h-px grow bg-muted-foreground/20"}),(0,a.jsx)(F,{row:t.arrival,type:"departure"}),(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground ",children:[(0,C.A)(new Date(t.arrival.timestamp),new Date(t.departure.timestamp))," ","hours"]}),(0,a.jsx)("div",{children:"\xb7"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[t.totalDistanceInMiles," mi"]}),(0,a.jsx)("div",{className:"h-px grow bg-muted-foreground/20 ml-2"})]}),(0,a.jsx)(F,{row:t.departure,type:"arrival"})]})}let E={flights:[{id:"result_1",departure:{cityName:"San Francisco",airportCode:"SFO",timestamp:"2024-05-19T18:00:00Z"},arrival:{cityName:"Rome",airportCode:"FCO",timestamp:"2024-05-20T14:30:00Z"},airlines:["United Airlines","Lufthansa"],priceInUSD:1200.5,numberOfStops:1},{id:"result_2",departure:{cityName:"San Francisco",airportCode:"SFO",timestamp:"2024-05-19T17:30:00Z"},arrival:{cityName:"Rome",airportCode:"FCO",timestamp:"2024-05-20T15:00:00Z"},airlines:["British Airways"],priceInUSD:1350,numberOfStops:0},{id:"result_3",departure:{cityName:"San Francisco",airportCode:"SFO",timestamp:"2024-05-19T19:15:00Z"},arrival:{cityName:"Rome",airportCode:"FCO",timestamp:"2024-05-20T16:45:00Z"},airlines:["Delta Air Lines","Air France"],priceInUSD:1150.75,numberOfStops:1},{id:"result_4",departure:{cityName:"San Francisco",airportCode:"SFO",timestamp:"2024-05-19T16:30:00Z"},arrival:{cityName:"Rome",airportCode:"FCO",timestamp:"2024-05-20T13:50:00Z"},airlines:["American Airlines","Iberia"],totalDurationInMinutes:740,priceInUSD:1250.25,numberOfStops:1}]};function P(e){let{chatId:t,results:s=E}=e,{append:l}=(0,i.RJ)({id:t,body:{id:t},maxSteps:5});return(0,a.jsx)("div",{className:"rounded-lg bg-muted px-4 py-1.5 flex flex-col",children:s.flights.map(e=>(0,a.jsxs)("div",{className:"cursor-pointer flex flex-row border-b dark:border-zinc-700 py-2 last-of-type:border-none group",onClick:()=>{let t=Array.isArray(e.airlines)?e.airlines.join(", "):e.airlines||"selected";l({role:"user",content:"I would like to book the ".concat(t," one!")})},children:[(0,a.jsxs)("div",{className:"flex flex-col w-full gap-0.5 justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-0.5 text-base sm:text-base font-medium group-hover:underline",children:[(0,a.jsx)("div",{className:"text",children:(0,h.WU)(new Date(e.departure.timestamp),"h:mm a")}),(0,a.jsx)("div",{className:"no-skeleton",children:"–"}),(0,a.jsx)("div",{className:"text",children:(0,h.WU)(new Date(e.arrival.timestamp),"h:mm a")})]}),(0,a.jsx)("div",{className:"text w-fit hidden sm:flex text-sm text-muted-foreground flex-row gap-2",children:(0,a.jsx)("div",{children:e.airlines.join(", ")})}),(0,a.jsxs)("div",{className:"text sm:hidden text-xs sm:text-sm text-muted-foreground flex flex-row gap-2",children:[e.numberOfStops||0," stops"]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-0.5 justify-between",children:[(0,a.jsx)("div",{className:"flex flex-row gap-2",children:(0,a.jsxs)("div",{className:"text-base sm:text-base",children:[(0,C.A)(new Date(e.arrival.timestamp),new Date(e.departure.timestamp))," ","hr"]})}),(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground flex flex-row",children:[(0,a.jsx)("div",{children:e.departure.airportCode}),(0,a.jsx)("div",{children:"–"}),(0,a.jsx)("div",{children:e.arrival.airportCode})]})]}),(0,a.jsxs)("div",{className:"flex flex-col w-32 items-end gap-0.5",children:[(0,a.jsx)("div",{className:"flex flex-row gap-2",children:(0,a.jsxs)("div",{className:"text-base sm:text-base text-emerald-600 dark:text-emerald-500",children:["$",e.priceInUSD]})}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-muted-foreground flex flex-row",children:"Round Trip"})]})]},e.id))})}let L={seats:[[{seatNumber:"1A",priceInUSD:150,isAvailable:!1},{seatNumber:"1B",priceInUSD:150,isAvailable:!1},{seatNumber:"1C",priceInUSD:150,isAvailable:!1},{seatNumber:"1D",priceInUSD:150,isAvailable:!1},{seatNumber:"1E",priceInUSD:150,isAvailable:!1},{seatNumber:"1F",priceInUSD:150,isAvailable:!1}],[{seatNumber:"2A",priceInUSD:150,isAvailable:!1},{seatNumber:"2B",priceInUSD:150,isAvailable:!1},{seatNumber:"2C",priceInUSD:150,isAvailable:!1},{seatNumber:"2D",priceInUSD:150,isAvailable:!1},{seatNumber:"2E",priceInUSD:150,isAvailable:!1},{seatNumber:"2F",priceInUSD:150,isAvailable:!1}],[{seatNumber:"3A",priceInUSD:150,isAvailable:!1},{seatNumber:"3B",priceInUSD:150,isAvailable:!1},{seatNumber:"3C",priceInUSD:150,isAvailable:!1},{seatNumber:"3D",priceInUSD:150,isAvailable:!1},{seatNumber:"3E",priceInUSD:150,isAvailable:!1},{seatNumber:"3F",priceInUSD:150,isAvailable:!1}],[{seatNumber:"4A",priceInUSD:150,isAvailable:!1},{seatNumber:"4B",priceInUSD:150,isAvailable:!1},{seatNumber:"4C",priceInUSD:150,isAvailable:!1},{seatNumber:"4D",priceInUSD:150,isAvailable:!1},{seatNumber:"4E",priceInUSD:150,isAvailable:!1},{seatNumber:"4F",priceInUSD:150,isAvailable:!1}],[{seatNumber:"5A",priceInUSD:150,isAvailable:!1},{seatNumber:"5B",priceInUSD:150,isAvailable:!1},{seatNumber:"5C",priceInUSD:150,isAvailable:!1},{seatNumber:"5D",priceInUSD:150,isAvailable:!1},{seatNumber:"5E",priceInUSD:150,isAvailable:!1},{seatNumber:"5F",priceInUSD:150,isAvailable:!1}]]};function O(e){let{chatId:t,availability:s=L}=e,{append:l}=(0,i.RJ)({id:t,body:{id:t},maxSteps:5});return(0,a.jsxs)("div",{className:"flex flex-col gap-2 bg-muted rounded-lg",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 scale-75",children:[(0,a.jsxs)("div",{className:"flex flex-row w-full justify-between text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsx)("div",{className:"w-[45px] sm:w-[54px] text-center",children:"A"}),(0,a.jsx)("div",{className:"w-[45px] sm:w-[54px] text-center",children:"B"}),(0,a.jsx)("div",{className:"w-[45px] sm:w-[54px] text-center",children:"C"})]}),(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsx)("div",{className:"w-[45px] sm:w-[54px] text-center",children:"D"}),(0,a.jsx)("div",{className:"w-[45px] sm:w-[54px] text-center",children:"E"}),(0,a.jsx)("div",{className:"w-[45px] sm:w-[54px] text-center",children:"F"})]})]}),s.seats.map((e,t)=>(0,a.jsx)("div",{className:"flex flex-row gap-4",children:e.map((e,s)=>(0,a.jsxs)(a.Fragment,{children:[3===s?(0,a.jsx)("div",{className:"flex flex-row items-center justify-center w-full text-muted-foreground",children:t+1}):null,(0,a.jsxs)("div",{onClick:()=>{l({role:"user",content:"I'd like to go with seat ".concat(e.seatNumber)})},className:f()("cursor-pointer group relative size-8 sm:size-10 flex-shrink-0 flex rounded-sm flex-row items-center justify-center",{"bg-blue-500 hover:bg-pink-500":e.isAvailable,"bg-gray-500 cursor-not-allowed":!e.isAvailable}),children:[(0,a.jsxs)("div",{className:"text-xs text-white",children:["$",e.priceInUSD]}),(0,a.jsx)("div",{className:f()("absolute -top-1 h-2 w-full scale-125 rounded-sm",{"bg-blue-600 group-hover:bg-pink-600":e.isAvailable,"bg-zinc-600 cursor-not-allowed":!e.isAvailable})})]},e.seatNumber)]}))},"row-".concat(t)))]}),(0,a.jsxs)("div",{className:"flex flex-row gap-4 justify-center pb-6",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)("div",{className:"size-4 bg-blue-500 rounded-sm"}),(0,a.jsx)("div",{className:"text text-muted-foreground font-medium text-sm",children:"Available"})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)("div",{className:"size-4 bg-gray-500 rounded-sm"}),(0,a.jsx)("div",{className:"text text-muted-foreground font-medium text-sm",children:"Unavailable"})]})]})]})}function R(e){let{result:{hasCompletedPayment:t}}=e;return(0,a.jsx)("div",{children:t?"Your payment transaction has been verified!":"Unable to verify your payment, please try again!"})}let B=e=>{let{chatId:t,role:s,content:i,toolInvocations:l,attachments:d}=e;return(0,a.jsxs)(r.E.div,{className:"flex flex-row gap-4 px-4 w-full md:w-[500px] md:px-0 first-of-type:pt-20",initial:{y:5,opacity:0},animate:{y:0,opacity:1},children:[(0,a.jsx)("div",{className:"size-[24px] border rounded-sm p-1 flex flex-col justify-center items-center shrink-0 text-zinc-500",children:"assistant"===s?(0,a.jsx)(n.Z8,{}):(0,a.jsx)(n.tB,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[i&&"string"==typeof i&&(0,a.jsx)("div",{className:"text-zinc-800 dark:text-zinc-300 flex flex-col gap-4",children:(0,a.jsx)(m,{children:i})}),l&&(0,a.jsx)("div",{className:"flex flex-col gap-4",children:l.map(e=>{let{toolName:s,toolCallId:i,state:l}=e;if("result"!==l)return(0,a.jsx)("div",{className:"skeleton",children:"getWeather"===s?(0,a.jsx)(b,{}):"displayFlightStatus"===s?(0,a.jsx)(_,{}):"searchFlights"===s?(0,a.jsx)(P,{chatId:t}):"selectSeats"===s?(0,a.jsx)(O,{chatId:t}):"createReservation"===s?(0,a.jsx)(z,{}):"authorizePayment"===s?(0,a.jsx)(D,{}):"displayBoardingPass"===s?(0,a.jsx)(k,{}):null},i);{let{result:l}=e;return(0,a.jsx)("div",{children:"getWeather"===s?(0,a.jsx)(b,{weatherAtLocation:l}):"displayFlightStatus"===s?(0,a.jsx)(_,{flightStatus:l}):"searchFlights"===s?(0,a.jsx)(P,{chatId:t,results:l}):"selectSeats"===s?(0,a.jsx)(O,{chatId:t,availability:l}):"createReservation"===s?Object.keys(l).includes("error")?null:(0,a.jsx)(z,{reservation:l}):"authorizePayment"===s?(0,a.jsx)(D,{intent:l}):"displayBoardingPass"===s?(0,a.jsx)(k,{boardingPass:l}):"verifyPayment"===s?(0,a.jsx)(R,{result:l}):(0,a.jsx)("div",{children:JSON.stringify(l,null,2)})},i)}})}),d&&(0,a.jsx)("div",{className:"flex flex-row gap-2",children:d.map(e=>(0,a.jsx)(x,{attachment:e},e.url))})]})]})},Z=function(){let[e,t]=(0,l.useState)({width:void 0,height:void 0});return(0,l.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e};var W=s(3900);let H=l.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("textarea",{className:(0,y.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});H.displayName="Textarea";let J=[{title:"Help me book a flight",label:"from San Francisco to London",action:"Help me book a flight from San Francisco to London"},{title:"What is the status",label:"of flight BA142 flying tmrw?",action:"What is the status of flight BA142 flying tmrw?"}];function K(e){let{input:t,setInput:s,isLoading:i,stop:d,attachments:c,setAttachments:o,messages:m,append:u,handleSubmit:f}=e,p=(0,l.useRef)(null),{width:h}=Z();(0,l.useEffect)(()=>{p.current&&v()},[]);let v=()=>{p.current&&(p.current.style.height="auto",p.current.style.height="".concat(p.current.scrollHeight+0,"px"))},g=(0,l.useRef)(null),[b,j]=(0,l.useState)([]),w=(0,l.useCallback)(()=>{if(f(void 0,{experimental_attachments:c}),o([]),h&&h>768){var e;null===(e=p.current)||void 0===e||e.focus()}},[c,f,o,h]),y=["image/png","image/jpeg","image/gif","application/pdf","text/plain","text/markdown","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],T=e=>{var t;return(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||""},D=e=>{if(e.type&&y.includes(e.type))return!0;if(!e.type){let t={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",pdf:"application/pdf",txt:"text/plain",md:"text/markdown",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}[T(e.name)];return!!t&&y.includes(t)}return!1},A=async e=>{if(!D(e)){N.A.error("Invalid file type. Please upload images (PNG, JPEG, GIF), PDFs, text files, or Office documents.");return}if(e.size>10485760){N.A.error("File too large. Please upload files smaller than ".concat(10,"MB."));return}let t=new FormData;t.append("file",e);try{let e=await fetch("/api/files/upload",{method:"POST",body:t});if(e.ok){let{url:t,pathname:s,contentType:a}=await e.json();return{url:t,name:s,contentType:a}}{let{error:t}=await e.json();N.A.error(t)}}catch(e){N.A.error("Failed to upload file, please try again!")}},S=(0,l.useCallback)(async e=>{let t=Array.from(e.target.files||[]);j(t.map(e=>e.name));try{let e=t.map(e=>A(e)),s=(await Promise.all(e)).filter(e=>void 0!==e);o(e=>[...e,...s])}catch(e){console.error("Error uploading files!",e)}finally{j([])}},[o]);return(0,a.jsxs)("div",{className:"relative w-full flex flex-col gap-4",children:[0===m.length&&0===c.length&&0===b.length&&(0,a.jsx)("div",{className:"grid sm:grid-cols-2 gap-4 w-full md:px-0 mx-auto md:max-w-[500px]",children:J.map((e,t)=>(0,a.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{delay:.05*t},className:t>1?"hidden sm:block":"block",children:(0,a.jsxs)("button",{onClick:async()=>{u({role:"user",content:e.action})},className:"border-none bg-muted/50 w-full text-left border border-zinc-200 dark:border-zinc-800 text-zinc-800 dark:text-zinc-300 rounded-lg p-3 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:e.title}),(0,a.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:e.label})]})},t))}),(0,a.jsx)("input",{type:"file",className:"fixed -top-4 -left-4 size-0.5 opacity-0 pointer-events-none",ref:g,multiple:!0,onChange:S,tabIndex:-1}),(c.length>0||b.length>0)&&(0,a.jsxs)("div",{className:"flex flex-row gap-2 overflow-x-scroll",children:[c.map(e=>(0,a.jsx)(x,{attachment:e},e.url)),b.map(e=>(0,a.jsx)(x,{attachment:{url:"",name:e,contentType:""},isUploading:!0},e))]}),(0,a.jsx)(H,{ref:p,placeholder:"Send a message...",value:t,onChange:e=>{s(e.target.value),v()},className:"min-h-[24px] overflow-hidden resize-none rounded-lg text-base bg-muted border-none",rows:3,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i?N.A.error("Please wait for the model to finish its response!"):w())}}),i?(0,a.jsx)(W.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-2 m-0.5 text-white",onClick:e=>{e.preventDefault(),d()},children:(0,a.jsx)(n.wN,{size:14})}):(0,a.jsx)(W.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-2 m-0.5 text-white",onClick:e=>{e.preventDefault(),w()},disabled:0===t.length||b.length>0,children:(0,a.jsx)(n.Hf,{size:14})}),(0,a.jsx)(W.z,{className:"rounded-full p-1.5 h-fit absolute bottom-2 right-10 m-0.5 dark:border-zinc-700",onClick:e=>{var t;e.preventDefault(),null===(t=g.current)||void 0===t||t.click()},variant:"outline",disabled:i,children:(0,a.jsx)(n.og,{size:14})})]})}let M=()=>(0,a.jsx)(r.E.div,{className:"max-w-[500px] mt-20 mx-4 md:mx-0",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{delay:.5},children:(0,a.jsxs)("div",{className:"border-none bg-muted/50 rounded-2xl p-6 flex flex-col gap-4 text-zinc-500 text-sm dark:text-zinc-400 dark:border-zinc-700",children:[(0,a.jsxs)("p",{className:"flex flex-row justify-center gap-4 items-center text-zinc-900 dark:text-zinc-50",children:[(0,a.jsx)(n.Kn,{}),(0,a.jsx)("span",{children:"+"}),(0,a.jsx)(n.P$,{})]}),(0,a.jsxs)("p",{children:["This is an open source Chatbot template powered by the Google Gemini model built with Next.js and the AI SDK by Vercel. It uses the"," ",(0,a.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"streamText"})," ","function in the server and the"," ",(0,a.jsx)("code",{className:"rounded-sm bg-muted-foreground/15 px-1.5 py-0.5",children:"useChat"})," ","hook on the client to create a seamless chat experience."]}),(0,a.jsxs)("p",{children:[" ","You can learn more about the AI SDK by visiting the"," ",(0,a.jsx)(d.default,{className:"text-blue-500 dark:text-blue-400",href:"https://sdk.vercel.ai/docs",target:"_blank",children:"Docs"}),"."]})]})},"overview");function G(e){let{id:t,initialMessages:s}=e,{messages:r,handleSubmit:n,input:d,setInput:c,append:o,isLoading:m,stop:x}=(0,i.RJ)({id:t,body:{id:t},initialMessages:s,maxSteps:10,onFinish:()=>{window.history.replaceState({},"","/chat/".concat(t))}}),[u,f]=function(){let e=(0,l.useRef)(null),t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let s=e.current,a=t.current;if(s&&a){let e=new MutationObserver(()=>{a.scrollIntoView({behavior:"instant",block:"end"})});return e.observe(s,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>e.disconnect()}},[]),[e,t]}(),[p,h]=(0,l.useState)([]);return(0,a.jsx)("div",{className:"flex flex-row justify-center pb-4 md:pb-8 h-dvh bg-background",children:(0,a.jsxs)("div",{className:"flex flex-col justify-between items-center gap-4",children:[(0,a.jsxs)("div",{ref:u,className:"flex flex-col gap-4 h-full w-dvw items-center overflow-y-scroll",children:[0===r.length&&(0,a.jsx)(M,{}),r.map(e=>(0,a.jsx)(B,{chatId:t,role:e.role,content:e.content,attachments:e.experimental_attachments,toolInvocations:e.toolInvocations},e.id)),(0,a.jsx)("div",{ref:f,className:"shrink-0 min-w-[24px] min-h-[24px]"})]}),(0,a.jsx)("form",{className:"flex flex-row gap-2 relative items-end w-full md:max-w-[500px] max-w-[calc(100dvw-32px) px-4 md:px-0",children:(0,a.jsx)(K,{input:d,setInput:c,handleSubmit:n,isLoading:m,stop:x,attachments:p,setAttachments:h,messages:r,append:o})})]})})}},5354:(e,t,s)=>{"use strict";s.d(t,{I:()=>r});var a=s(7437),i=s(2265),l=s(3989);let r=i.forwardRef((e,t)=>{let{className:s,type:i,...r}=e;return(0,a.jsx)("input",{type:i,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});r.displayName="Input"}}]);