"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{2320:(e,t,r)=>{r.d(t,{Ox:()=>eS});var a,n,o,s,i,l,u,c,d,m=r(4299),p=r(5626),f=r(5453),y=r(8607),h=Object.defineProperty,v=(e,t)=>{for(var r in t)h(e,r,{get:t[r],enumerable:!0})};async function g(e){return void 0===e?Promise.resolve():new Promise(t=>setTimeout(t,e))}var x="AI_RetryError",_=`vercel.ai.error.${x}`,A=Symbol.for(_),T=class extends p.AX{constructor({message:e,reason:t,errors:r}){super({name:x,message:e}),this[a]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return p.AX.hasMarker(e,_)}static isRetryError(e){return e instanceof Error&&e.name===x&&"string"==typeof e.reason&&Array.isArray(e.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};a=A;var b={spanContext:()=>w,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},w={traceId:"",spanId:"",traceFlags:0},I="AI_DownloadError",S=`vercel.ai.error.${I}`,E=Symbol.for(S),R=class extends p.AX{constructor({url:e,statusCode:t,statusText:r,cause:a,message:o=null==a?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${a}`}){super({name:I,message:o,cause:a}),this[n]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return p.AX.hasMarker(e,S)}static isDownloadError(e){return e instanceof Error&&e.name===I&&"string"==typeof e.url&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.statusText||"string"==typeof e.statusText)}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};n=E;var k=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}],M="AI_InvalidDataContentError",C=`vercel.ai.error.${M}`,X=Symbol.for(C),$=class extends p.AX{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:M,message:r,cause:t}),this[o]=!0,this.content=e}static isInstance(e){return p.AX.hasMarker(e,C)}static isInvalidDataContentError(e){return e instanceof Error&&e.name===M&&null!=e.content}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};o=X;var N=f.G0([f.Z_(),f.Pp(Uint8Array),f.Pp(ArrayBuffer),f.PG(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function Z(e){return"string"==typeof e?e:e instanceof ArrayBuffer?convertUint8ArrayToBase64(new Uint8Array(e)):convertUint8ArrayToBase64(e)}function B(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return convertBase64ToUint8Array(e)}catch(t){throw new $({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new $({content:e})}var G="AI_InvalidMessageRoleError",O=`vercel.ai.error.${G}`,D=Symbol.for(O),F=class extends p.AX{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:G,message:t}),this[s]=!0,this.role=e}static isInstance(e){return p.AX.hasMarker(e,O)}static isInvalidMessageRoleError(e){return e instanceof Error&&e.name===G&&"string"==typeof e.role}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};function P(e){try{let[t,r]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:r}}catch(e){return{mimeType:void 0,base64Content:void 0}}}s=D;var U="AI_InvalidArgumentError",q=`vercel.ai.error.${U}`,j=Symbol.for(q);p.AX,i=j;var J=f.Vo(()=>f.G0([f.lB(),f.Z_(),f.Rx(),f.O7(),f.IM(f.Z_(),J),f.IX(J)])),z=f.IM(f.Z_(),f.IM(f.Z_(),J)),L=f.Ry({type:f.i0("text"),text:f.Z_(),experimental_providerMetadata:z.optional()}),V=f.Ry({type:f.i0("image"),image:f.G0([N,f.Pp(URL)]),mimeType:f.Z_().optional(),experimental_providerMetadata:z.optional()}),H=f.Ry({type:f.i0("file"),data:f.G0([N,f.Pp(URL)]),mimeType:f.Z_(),experimental_providerMetadata:z.optional()}),K=f.Ry({type:f.i0("tool-call"),toolCallId:f.Z_(),toolName:f.Z_(),args:f._4()}),Q=f.Ry({type:f.i0("tool-result"),toolCallId:f.Z_(),toolName:f.Z_(),result:f._4(),isError:f.O7().optional(),experimental_providerMetadata:z.optional()}),W=f.Ry({role:f.i0("system"),content:f.Z_(),experimental_providerMetadata:z.optional()}),Y=f.Ry({role:f.i0("user"),content:f.G0([f.Z_(),f.IX(f.G0([L,V,H]))]),experimental_providerMetadata:z.optional()}),ee=f.Ry({role:f.i0("assistant"),content:f.G0([f.Z_(),f.IX(f.G0([L,K]))]),experimental_providerMetadata:z.optional()}),et=f.Ry({role:f.i0("tool"),content:f.IX(Q),experimental_providerMetadata:z.optional()});function er(e,{contentType:t,dataStreamVersion:r}){var a;let n=new Headers(null!=(a=null==e?void 0:e.headers)?a:{});return n.has("Content-Type")||n.set("Content-Type",t),void 0!==r&&n.set("X-Vercel-AI-Data-Stream",r),n}f.G0([W,Y,ee,et]);var ea="AI_NoObjectGeneratedError",en=`vercel.ai.error.${ea}`,eo=Symbol.for(en),es=class extends p.AX{constructor({message:e="No object generated."}={}){super({name:ea,message:e}),this[l]=!0}static isInstance(e){return p.AX.hasMarker(e,en)}static isNoObjectGeneratedError(e){return e instanceof Error&&e.name===ea}toJSON(){return{name:this.name,cause:this.cause,message:this.message,stack:this.stack}}};l=eo;(0,m.bF)({prefix:"aiobj-",size:24});(0,m.bF)({prefix:"aiobj-",size:24});var ei="AI_InvalidToolArgumentsError",el=`vercel.ai.error.${ei}`,eu=Symbol.for(el);p.AX,u=eu;var ec="AI_NoSuchToolError",ed=`vercel.ai.error.${ec}`,em=Symbol.for(ed);p.AX,c=em;var ep=Symbol.for("vercel.ai.error.AI_MessageConversionError");p.AX;function ef(e,t){let r,a;let n=e.getReader(),o=t.getReader(),s=!1,i=!1;async function l(e){try{null==r&&(r=n.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==a&&(a=o.read());let t=await a;a=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(s){await u(e);return}if(i){await l(e);return}null==r&&(r=n.read()),null==a&&(a=o.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:n})),a.then(e=>({result:e,reader:o}))]);t.done||e.enqueue(t.value),c===n?(r=void 0,t.done&&(await u(e),s=!0)):(a=void 0,t.done&&(i=!0,await l(e)))}catch(t){e.error(t)}},cancel(){n.cancel(),o.cancel()}})}(0,m.bF)({prefix:"aitxt-",size:24}),(0,m.bF)({prefix:"aitxt-",size:24});var ey="AI_NoSuchProviderError",eh=`vercel.ai.error.${ey}`,ev=Symbol.for(eh);function eg(e){let t=new TextEncoder,r="",a=e||{};return new TransformStream({async start(){a.onStart&&await a.onStart()},async transform(e,n){let o="string"==typeof e?e:e.content;n.enqueue(t.encode(o)),r+=o,a.onToken&&await a.onToken(o),a.onText&&"string"==typeof e&&await a.onText(e)},async flush(){let e="experimental_onFunctionCall"in a;a.onCompletion&&await a.onCompletion(r),a.onFinal&&!e&&await a.onFinal(r)}})}p.JJ,d=ev;function ex(){let e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:async(r,a)=>{let n=t.decode(r);a.enqueue(e.encode((0,y.vl)("text",n)))}})}new TextDecoder("utf-8");function e_(e,t){return eA(e,t)}function eA(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e){t.enqueue(e);return}if("event"in e){"on_chat_model_stream"===e.event&&eb(null==(r=e.data)?void 0:r.chunk,t);return}eb(e,t)}})).pipeThrough(eg(t)).pipeThrough(ex())}function eT(e,t){var r;let a=eA(e,null==t?void 0:t.callbacks),n=null==t?void 0:t.data,o=null==t?void 0:t.init;return new Response(n?ef(n.stream,a):a,{status:null!=(r=null==o?void 0:o.status)?r:200,statusText:null==o?void 0:o.statusText,headers:er(o,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function eb(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function ew(e,t){return(function(e){let t;let r=e[Symbol.asyncIterator](),a=(t=!0,e=>(t&&(e=e.trimStart())&&(t=!1),e));return new ReadableStream({async pull(e){var t;let{value:n,done:o}=await r.next();if(o){e.close();return}let s=a(null!=(t=n.delta)?t:"");s&&e.enqueue(s)}})})(e).pipeThrough(eg(t)).pipeThrough(ex())}function eI(e,t={}){var r;let{init:a,data:n,callbacks:o}=t,s=ew(e,o);return new Response(n?ef(n.stream,s):s,{status:null!=(r=null==a?void 0:a.status)?r:200,statusText:null==a?void 0:a.statusText,headers:er(a,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}v({},{toAIStream:()=>e_,toDataStream:()=>eA,toDataStreamResponse:()=>eT}),v({},{toDataStream:()=>ew,toDataStreamResponse:()=>eI});Symbol("internal_openai_fn_messages"),Response;var eS=m.Ox}}]);